{"/Users/somkheart/Documents/lprlinebot/lib/client.ts":{"path":"/Users/somkheart/Documents/lprlinebot/lib/client.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":23}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":32}},"3":{"start":{"line":5,"column":14},"end":{"line":5,"column":32}},"4":{"start":{"line":6,"column":16},"end":{"line":6,"column":34}},"5":{"start":{"line":7,"column":20},"end":{"line":7,"column":42}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":32}},"7":{"start":{"line":11,"column":8},"end":{"line":13,"column":9}},"8":{"start":{"line":12,"column":12},"end":{"line":12,"column":55}},"9":{"start":{"line":14,"column":8},"end":{"line":14,"column":29}},"10":{"start":{"line":15,"column":8},"end":{"line":17,"column":88}},"11":{"start":{"line":20,"column":8},"end":{"line":20,"column":36}},"12":{"start":{"line":23,"column":23},"end":{"line":23,"column":38}},"13":{"start":{"line":24,"column":8},"end":{"line":26,"column":9}},"14":{"start":{"line":25,"column":12},"end":{"line":25,"column":77}},"15":{"start":{"line":28,"column":8},"end":{"line":28,"column":32}},"16":{"start":{"line":29,"column":8},"end":{"line":29,"column":22}},"17":{"start":{"line":32,"column":53},"end":{"line":32,"column":58}},"18":{"start":{"line":33,"column":22},"end":{"line":33,"column":54}},"19":{"start":{"line":34,"column":8},"end":{"line":37,"column":9}},"20":{"start":{"line":35,"column":12},"end":{"line":36,"column":67}},"21":{"start":{"line":38,"column":8},"end":{"line":38,"column":23}},"22":{"start":{"line":41,"column":8},"end":{"line":45,"column":41}},"23":{"start":{"line":48,"column":8},"end":{"line":52,"column":11}},"24":{"start":{"line":55,"column":8},"end":{"line":59,"column":41}},"25":{"start":{"line":62,"column":8},"end":{"line":68,"column":41}},"26":{"start":{"line":71,"column":8},"end":{"line":74,"column":41}},"27":{"start":{"line":77,"column":24},"end":{"line":77,"column":100}},"28":{"start":{"line":78,"column":8},"end":{"line":78,"column":43}},"29":{"start":{"line":81,"column":24},"end":{"line":81,"column":121}},"30":{"start":{"line":82,"column":8},"end":{"line":82,"column":43}},"31":{"start":{"line":85,"column":8},"end":{"line":85,"column":67}},"32":{"start":{"line":88,"column":8},"end":{"line":88,"column":65}},"33":{"start":{"line":91,"column":24},"end":{"line":91,"column":26}},"34":{"start":{"line":93,"column":8},"end":{"line":98,"column":24}},"35":{"start":{"line":94,"column":24},"end":{"line":94,"column":142}},"36":{"start":{"line":95,"column":12},"end":{"line":95,"column":36}},"37":{"start":{"line":96,"column":12},"end":{"line":96,"column":56}},"38":{"start":{"line":97,"column":12},"end":{"line":97,"column":29}},"39":{"start":{"line":99,"column":8},"end":{"line":99,"column":25}},"40":{"start":{"line":102,"column":8},"end":{"line":102,"column":55}},"41":{"start":{"line":105,"column":8},"end":{"line":105,"column":53}},"42":{"start":{"line":108,"column":33},"end":{"line":108,"column":122}},"43":{"start":{"line":109,"column":8},"end":{"line":109,"column":52}},"44":{"start":{"line":112,"column":32},"end":{"line":112,"column":119}},"45":{"start":{"line":113,"column":8},"end":{"line":113,"column":51}},"46":{"start":{"line":116,"column":29},"end":{"line":116,"column":112}},"47":{"start":{"line":117,"column":8},"end":{"line":117,"column":48}},"48":{"start":{"line":120,"column":8},"end":{"line":120,"column":98}},"49":{"start":{"line":123,"column":8},"end":{"line":123,"column":97}},"50":{"start":{"line":126,"column":8},"end":{"line":126,"column":48}},"51":{"start":{"line":129,"column":8},"end":{"line":129,"column":46}},"52":{"start":{"line":132,"column":20},"end":{"line":132,"column":101}},"53":{"start":{"line":133,"column":8},"end":{"line":133,"column":39}},"54":{"start":{"line":136,"column":20},"end":{"line":136,"column":98}},"55":{"start":{"line":137,"column":8},"end":{"line":137,"column":50}},"56":{"start":{"line":140,"column":8},"end":{"line":140,"column":94}},"57":{"start":{"line":143,"column":20},"end":{"line":143,"column":102}},"58":{"start":{"line":144,"column":8},"end":{"line":144,"column":50}},"59":{"start":{"line":147,"column":8},"end":{"line":147,"column":107}},"60":{"start":{"line":150,"column":8},"end":{"line":150,"column":95}},"61":{"start":{"line":153,"column":8},"end":{"line":156,"column":11}},"62":{"start":{"line":159,"column":8},"end":{"line":161,"column":11}},"63":{"start":{"line":164,"column":8},"end":{"line":164,"column":100}},"64":{"start":{"line":167,"column":8},"end":{"line":167,"column":120}},"65":{"start":{"line":170,"column":20},"end":{"line":170,"column":92}},"66":{"start":{"line":171,"column":8},"end":{"line":171,"column":49}},"67":{"start":{"line":174,"column":8},"end":{"line":174,"column":101}},"68":{"start":{"line":177,"column":20},"end":{"line":177,"column":96}},"69":{"start":{"line":178,"column":8},"end":{"line":178,"column":50}},"70":{"start":{"line":181,"column":8},"end":{"line":181,"column":89}},"71":{"start":{"line":184,"column":20},"end":{"line":184,"column":104}},"72":{"start":{"line":185,"column":8},"end":{"line":185,"column":49}},"73":{"start":{"line":188,"column":20},"end":{"line":188,"column":114}},"74":{"start":{"line":189,"column":8},"end":{"line":189,"column":39}},"75":{"start":{"line":192,"column":20},"end":{"line":192,"column":113}},"76":{"start":{"line":193,"column":8},"end":{"line":193,"column":39}},"77":{"start":{"line":196,"column":20},"end":{"line":196,"column":118}},"78":{"start":{"line":197,"column":8},"end":{"line":197,"column":39}},"79":{"start":{"line":200,"column":20},"end":{"line":200,"column":129}},"80":{"start":{"line":201,"column":8},"end":{"line":201,"column":39}},"81":{"start":{"line":204,"column":20},"end":{"line":204,"column":92}},"82":{"start":{"line":205,"column":8},"end":{"line":205,"column":39}},"83":{"start":{"line":208,"column":20},"end":{"line":208,"column":104}},"84":{"start":{"line":209,"column":8},"end":{"line":209,"column":39}},"85":{"start":{"line":212,"column":20},"end":{"line":212,"column":118}},"86":{"start":{"line":213,"column":8},"end":{"line":213,"column":39}},"87":{"start":{"line":216,"column":20},"end":{"line":216,"column":116}},"88":{"start":{"line":217,"column":8},"end":{"line":217,"column":39}},"89":{"start":{"line":220,"column":20},"end":{"line":220,"column":109}},"90":{"start":{"line":221,"column":8},"end":{"line":221,"column":39}},"91":{"start":{"line":224,"column":20},"end":{"line":224,"column":98}},"92":{"start":{"line":225,"column":8},"end":{"line":225,"column":39}},"93":{"start":{"line":228,"column":20},"end":{"line":228,"column":123}},"94":{"start":{"line":229,"column":8},"end":{"line":229,"column":39}},"95":{"start":{"line":232,"column":20},"end":{"line":232,"column":140}},"96":{"start":{"line":233,"column":8},"end":{"line":233,"column":39}},"97":{"start":{"line":238,"column":20},"end":{"line":238,"column":151}},"98":{"start":{"line":239,"column":8},"end":{"line":239,"column":39}},"99":{"start":{"line":242,"column":20},"end":{"line":242,"column":138}},"100":{"start":{"line":243,"column":8},"end":{"line":243,"column":39}},"101":{"start":{"line":246,"column":20},"end":{"line":246,"column":134}},"102":{"start":{"line":247,"column":8},"end":{"line":247,"column":39}},"103":{"start":{"line":250,"column":20},"end":{"line":252,"column":10}},"104":{"start":{"line":253,"column":8},"end":{"line":253,"column":39}},"105":{"start":{"line":256,"column":20},"end":{"line":256,"column":114}},"106":{"start":{"line":257,"column":8},"end":{"line":257,"column":39}},"107":{"start":{"line":260,"column":20},"end":{"line":260,"column":111}},"108":{"start":{"line":261,"column":8},"end":{"line":261,"column":39}},"109":{"start":{"line":264,"column":20},"end":{"line":271,"column":10}},"110":{"start":{"line":272,"column":8},"end":{"line":272,"column":39}},"111":{"start":{"line":275,"column":20},"end":{"line":275,"column":107}},"112":{"start":{"line":276,"column":8},"end":{"line":276,"column":39}},"113":{"start":{"line":279,"column":20},"end":{"line":279,"column":127}},"114":{"start":{"line":280,"column":8},"end":{"line":280,"column":39}},"115":{"start":{"line":283,"column":0},"end":{"line":283,"column":25}},"116":{"start":{"line":286,"column":8},"end":{"line":286,"column":41}},"117":{"start":{"line":289,"column":8},"end":{"line":293,"column":11}},"118":{"start":{"line":296,"column":8},"end":{"line":296,"column":95}},"119":{"start":{"line":299,"column":8},"end":{"line":303,"column":11}},"120":{"start":{"line":306,"column":8},"end":{"line":309,"column":11}},"121":{"start":{"line":312,"column":8},"end":{"line":316,"column":11}},"122":{"start":{"line":319,"column":0},"end":{"line":319,"column":22}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":24},"end":{"line":18,"column":5}},"line":9},"1":{"name":"(anonymous_1)","decl":{"start":{"line":19,"column":4},"end":{"line":19,"column":5}},"loc":{"start":{"line":19,"column":33},"end":{"line":21,"column":5}},"line":19},"2":{"name":"(anonymous_2)","decl":{"start":{"line":22,"column":4},"end":{"line":22,"column":5}},"loc":{"start":{"line":22,"column":28},"end":{"line":30,"column":5}},"line":22},"3":{"name":"(anonymous_3)","decl":{"start":{"line":31,"column":4},"end":{"line":31,"column":5}},"loc":{"start":{"line":31,"column":32},"end":{"line":39,"column":5}},"line":31},"4":{"name":"(anonymous_4)","decl":{"start":{"line":40,"column":4},"end":{"line":40,"column":5}},"loc":{"start":{"line":40,"column":60},"end":{"line":46,"column":5}},"line":40},"5":{"name":"(anonymous_5)","decl":{"start":{"line":47,"column":4},"end":{"line":47,"column":5}},"loc":{"start":{"line":47,"column":69},"end":{"line":53,"column":5}},"line":47},"6":{"name":"(anonymous_6)","decl":{"start":{"line":54,"column":4},"end":{"line":54,"column":5}},"loc":{"start":{"line":54,"column":64},"end":{"line":60,"column":5}},"line":54},"7":{"name":"(anonymous_7)","decl":{"start":{"line":61,"column":4},"end":{"line":61,"column":5}},"loc":{"start":{"line":61,"column":87},"end":{"line":69,"column":5}},"line":61},"8":{"name":"(anonymous_8)","decl":{"start":{"line":70,"column":4},"end":{"line":70,"column":5}},"loc":{"start":{"line":70,"column":60},"end":{"line":75,"column":5}},"line":70},"9":{"name":"(anonymous_9)","decl":{"start":{"line":76,"column":4},"end":{"line":76,"column":5}},"loc":{"start":{"line":76,"column":29},"end":{"line":79,"column":5}},"line":76},"10":{"name":"(anonymous_10)","decl":{"start":{"line":80,"column":4},"end":{"line":80,"column":5}},"loc":{"start":{"line":80,"column":57},"end":{"line":83,"column":5}},"line":80},"11":{"name":"(anonymous_11)","decl":{"start":{"line":84,"column":4},"end":{"line":84,"column":5}},"loc":{"start":{"line":84,"column":49},"end":{"line":86,"column":5}},"line":84},"12":{"name":"(anonymous_12)","decl":{"start":{"line":87,"column":4},"end":{"line":87,"column":5}},"loc":{"start":{"line":87,"column":47},"end":{"line":89,"column":5}},"line":87},"13":{"name":"(anonymous_13)","decl":{"start":{"line":90,"column":4},"end":{"line":90,"column":5}},"loc":{"start":{"line":90,"column":45},"end":{"line":100,"column":5}},"line":90},"14":{"name":"(anonymous_14)","decl":{"start":{"line":101,"column":4},"end":{"line":101,"column":5}},"loc":{"start":{"line":101,"column":37},"end":{"line":103,"column":5}},"line":101},"15":{"name":"(anonymous_15)","decl":{"start":{"line":104,"column":4},"end":{"line":104,"column":5}},"loc":{"start":{"line":104,"column":35},"end":{"line":106,"column":5}},"line":104},"16":{"name":"(anonymous_16)","decl":{"start":{"line":107,"column":4},"end":{"line":107,"column":5}},"loc":{"start":{"line":107,"column":40},"end":{"line":110,"column":5}},"line":107},"17":{"name":"(anonymous_17)","decl":{"start":{"line":111,"column":4},"end":{"line":111,"column":5}},"loc":{"start":{"line":111,"column":38},"end":{"line":114,"column":5}},"line":111},"18":{"name":"(anonymous_18)","decl":{"start":{"line":115,"column":4},"end":{"line":115,"column":5}},"loc":{"start":{"line":115,"column":35},"end":{"line":118,"column":5}},"line":115},"19":{"name":"(anonymous_19)","decl":{"start":{"line":119,"column":4},"end":{"line":119,"column":5}},"loc":{"start":{"line":119,"column":39},"end":{"line":121,"column":5}},"line":119},"20":{"name":"(anonymous_20)","decl":{"start":{"line":122,"column":4},"end":{"line":122,"column":5}},"loc":{"start":{"line":122,"column":32},"end":{"line":124,"column":5}},"line":122},"21":{"name":"(anonymous_21)","decl":{"start":{"line":125,"column":4},"end":{"line":125,"column":5}},"loc":{"start":{"line":125,"column":30},"end":{"line":127,"column":5}},"line":125},"22":{"name":"(anonymous_22)","decl":{"start":{"line":128,"column":4},"end":{"line":128,"column":5}},"loc":{"start":{"line":128,"column":28},"end":{"line":130,"column":5}},"line":128},"23":{"name":"(anonymous_23)","decl":{"start":{"line":131,"column":4},"end":{"line":131,"column":5}},"loc":{"start":{"line":131,"column":34},"end":{"line":134,"column":5}},"line":131},"24":{"name":"(anonymous_24)","decl":{"start":{"line":135,"column":4},"end":{"line":135,"column":5}},"loc":{"start":{"line":135,"column":35},"end":{"line":138,"column":5}},"line":135},"25":{"name":"(anonymous_25)","decl":{"start":{"line":139,"column":4},"end":{"line":139,"column":5}},"loc":{"start":{"line":139,"column":37},"end":{"line":141,"column":5}},"line":139},"26":{"name":"(anonymous_26)","decl":{"start":{"line":142,"column":4},"end":{"line":142,"column":5}},"loc":{"start":{"line":142,"column":38},"end":{"line":145,"column":5}},"line":142},"27":{"name":"(anonymous_27)","decl":{"start":{"line":146,"column":4},"end":{"line":146,"column":5}},"loc":{"start":{"line":146,"column":49},"end":{"line":148,"column":5}},"line":146},"28":{"name":"(anonymous_28)","decl":{"start":{"line":149,"column":4},"end":{"line":149,"column":5}},"loc":{"start":{"line":149,"column":41},"end":{"line":151,"column":5}},"line":149},"29":{"name":"(anonymous_29)","decl":{"start":{"line":152,"column":4},"end":{"line":152,"column":5}},"loc":{"start":{"line":152,"column":59},"end":{"line":157,"column":5}},"line":152},"30":{"name":"(anonymous_30)","decl":{"start":{"line":158,"column":4},"end":{"line":158,"column":5}},"loc":{"start":{"line":158,"column":52},"end":{"line":162,"column":5}},"line":158},"31":{"name":"(anonymous_31)","decl":{"start":{"line":163,"column":4},"end":{"line":163,"column":5}},"loc":{"start":{"line":163,"column":39},"end":{"line":165,"column":5}},"line":163},"32":{"name":"(anonymous_32)","decl":{"start":{"line":166,"column":4},"end":{"line":166,"column":5}},"loc":{"start":{"line":166,"column":58},"end":{"line":168,"column":5}},"line":166},"33":{"name":"(anonymous_33)","decl":{"start":{"line":169,"column":4},"end":{"line":169,"column":5}},"loc":{"start":{"line":169,"column":28},"end":{"line":172,"column":5}},"line":169},"34":{"name":"(anonymous_34)","decl":{"start":{"line":173,"column":4},"end":{"line":173,"column":5}},"loc":{"start":{"line":173,"column":41},"end":{"line":175,"column":5}},"line":173},"35":{"name":"(anonymous_35)","decl":{"start":{"line":176,"column":4},"end":{"line":176,"column":5}},"loc":{"start":{"line":176,"column":33},"end":{"line":179,"column":5}},"line":176},"36":{"name":"(anonymous_36)","decl":{"start":{"line":180,"column":4},"end":{"line":180,"column":5}},"loc":{"start":{"line":180,"column":34},"end":{"line":182,"column":5}},"line":180},"37":{"name":"(anonymous_37)","decl":{"start":{"line":183,"column":4},"end":{"line":183,"column":5}},"loc":{"start":{"line":183,"column":31},"end":{"line":186,"column":5}},"line":183},"38":{"name":"(anonymous_38)","decl":{"start":{"line":187,"column":4},"end":{"line":187,"column":5}},"loc":{"start":{"line":187,"column":45},"end":{"line":190,"column":5}},"line":187},"39":{"name":"(anonymous_39)","decl":{"start":{"line":191,"column":4},"end":{"line":191,"column":5}},"loc":{"start":{"line":191,"column":44},"end":{"line":194,"column":5}},"line":191},"40":{"name":"(anonymous_40)","decl":{"start":{"line":195,"column":4},"end":{"line":195,"column":5}},"loc":{"start":{"line":195,"column":49},"end":{"line":198,"column":5}},"line":195},"41":{"name":"(anonymous_41)","decl":{"start":{"line":199,"column":4},"end":{"line":199,"column":5}},"loc":{"start":{"line":199,"column":43},"end":{"line":202,"column":5}},"line":199},"42":{"name":"(anonymous_42)","decl":{"start":{"line":203,"column":4},"end":{"line":203,"column":5}},"loc":{"start":{"line":203,"column":48},"end":{"line":206,"column":5}},"line":203},"43":{"name":"(anonymous_43)","decl":{"start":{"line":207,"column":4},"end":{"line":207,"column":5}},"loc":{"start":{"line":207,"column":45},"end":{"line":210,"column":5}},"line":207},"44":{"name":"(anonymous_44)","decl":{"start":{"line":211,"column":4},"end":{"line":211,"column":5}},"loc":{"start":{"line":211,"column":49},"end":{"line":214,"column":5}},"line":211},"45":{"name":"(anonymous_45)","decl":{"start":{"line":215,"column":4},"end":{"line":215,"column":5}},"loc":{"start":{"line":215,"column":45},"end":{"line":218,"column":5}},"line":215},"46":{"name":"(anonymous_46)","decl":{"start":{"line":219,"column":4},"end":{"line":219,"column":5}},"loc":{"start":{"line":219,"column":37},"end":{"line":222,"column":5}},"line":219},"47":{"name":"(anonymous_47)","decl":{"start":{"line":223,"column":4},"end":{"line":223,"column":5}},"loc":{"start":{"line":223,"column":34},"end":{"line":226,"column":5}},"line":223},"48":{"name":"(anonymous_48)","decl":{"start":{"line":227,"column":4},"end":{"line":227,"column":5}},"loc":{"start":{"line":227,"column":50},"end":{"line":230,"column":5}},"line":227},"49":{"name":"(anonymous_49)","decl":{"start":{"line":231,"column":4},"end":{"line":231,"column":5}},"loc":{"start":{"line":231,"column":57},"end":{"line":234,"column":5}},"line":231},"50":{"name":"(anonymous_50)","decl":{"start":{"line":235,"column":4},"end":{"line":235,"column":5}},"loc":{"start":{"line":237,"column":16},"end":{"line":240,"column":5}},"line":237},"51":{"name":"(anonymous_51)","decl":{"start":{"line":241,"column":4},"end":{"line":241,"column":5}},"loc":{"start":{"line":241,"column":55},"end":{"line":244,"column":5}},"line":241},"52":{"name":"(anonymous_52)","decl":{"start":{"line":245,"column":4},"end":{"line":245,"column":5}},"loc":{"start":{"line":245,"column":51},"end":{"line":248,"column":5}},"line":245},"53":{"name":"(anonymous_53)","decl":{"start":{"line":249,"column":4},"end":{"line":249,"column":5}},"loc":{"start":{"line":249,"column":68},"end":{"line":254,"column":5}},"line":249},"54":{"name":"(anonymous_54)","decl":{"start":{"line":255,"column":4},"end":{"line":255,"column":5}},"loc":{"start":{"line":255,"column":47},"end":{"line":258,"column":5}},"line":255},"55":{"name":"(anonymous_55)","decl":{"start":{"line":259,"column":4},"end":{"line":259,"column":5}},"loc":{"start":{"line":259,"column":44},"end":{"line":262,"column":5}},"line":259},"56":{"name":"(anonymous_56)","decl":{"start":{"line":263,"column":4},"end":{"line":263,"column":5}},"loc":{"start":{"line":263,"column":104},"end":{"line":273,"column":5}},"line":263},"57":{"name":"(anonymous_57)","decl":{"start":{"line":274,"column":4},"end":{"line":274,"column":5}},"loc":{"start":{"line":274,"column":43},"end":{"line":277,"column":5}},"line":274},"58":{"name":"(anonymous_58)","decl":{"start":{"line":278,"column":4},"end":{"line":278,"column":5}},"loc":{"start":{"line":278,"column":60},"end":{"line":281,"column":5}},"line":278},"59":{"name":"(anonymous_59)","decl":{"start":{"line":285,"column":4},"end":{"line":285,"column":5}},"loc":{"start":{"line":285,"column":18},"end":{"line":287,"column":5}},"line":285},"60":{"name":"(anonymous_60)","decl":{"start":{"line":288,"column":4},"end":{"line":288,"column":5}},"loc":{"start":{"line":288,"column":47},"end":{"line":294,"column":5}},"line":288},"61":{"name":"(anonymous_61)","decl":{"start":{"line":295,"column":4},"end":{"line":295,"column":5}},"loc":{"start":{"line":295,"column":36},"end":{"line":297,"column":5}},"line":295},"62":{"name":"(anonymous_62)","decl":{"start":{"line":298,"column":4},"end":{"line":298,"column":5}},"loc":{"start":{"line":298,"column":50},"end":{"line":304,"column":5}},"line":298},"63":{"name":"(anonymous_63)","decl":{"start":{"line":305,"column":4},"end":{"line":305,"column":5}},"loc":{"start":{"line":305,"column":54},"end":{"line":310,"column":5}},"line":305},"64":{"name":"(anonymous_64)","decl":{"start":{"line":311,"column":4},"end":{"line":311,"column":5}},"loc":{"start":{"line":311,"column":73},"end":{"line":317,"column":5}},"line":311}},"branchMap":{"0":{"loc":{"start":{"line":11,"column":8},"end":{"line":13,"column":9}},"type":"if","locations":[{"start":{"line":11,"column":8},"end":{"line":13,"column":9}},{"start":{"line":11,"column":8},"end":{"line":13,"column":9}}],"line":11},"1":{"loc":{"start":{"line":24,"column":8},"end":{"line":26,"column":9}},"type":"if","locations":[{"start":{"line":24,"column":8},"end":{"line":26,"column":9}},{"start":{"line":24,"column":8},"end":{"line":26,"column":9}}],"line":24},"2":{"loc":{"start":{"line":34,"column":8},"end":{"line":37,"column":9}},"type":"if","locations":[{"start":{"line":34,"column":8},"end":{"line":37,"column":9}},{"start":{"line":34,"column":8},"end":{"line":37,"column":9}}],"line":34},"3":{"loc":{"start":{"line":40,"column":30},"end":{"line":40,"column":58}},"type":"default-arg","locations":[{"start":{"line":40,"column":53},"end":{"line":40,"column":58}}],"line":40},"4":{"loc":{"start":{"line":47,"column":39},"end":{"line":47,"column":67}},"type":"default-arg","locations":[{"start":{"line":47,"column":62},"end":{"line":47,"column":67}}],"line":47},"5":{"loc":{"start":{"line":54,"column":34},"end":{"line":54,"column":62}},"type":"default-arg","locations":[{"start":{"line":54,"column":57},"end":{"line":54,"column":62}}],"line":54},"6":{"loc":{"start":{"line":61,"column":57},"end":{"line":61,"column":85}},"type":"default-arg","locations":[{"start":{"line":61,"column":80},"end":{"line":61,"column":85}}],"line":61},"7":{"loc":{"start":{"line":70,"column":30},"end":{"line":70,"column":58}},"type":"default-arg","locations":[{"start":{"line":70,"column":53},"end":{"line":70,"column":58}}],"line":70},"8":{"loc":{"start":{"line":94,"column":117},"end":{"line":94,"column":141}},"type":"cond-expr","locations":[{"start":{"line":94,"column":125},"end":{"line":94,"column":134}},{"start":{"line":94,"column":137},"end":{"line":94,"column":141}}],"line":94}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":2,"7":2,"8":1,"9":1,"10":1,"11":1,"12":6,"13":6,"14":1,"15":6,"16":6,"17":21,"18":21,"19":21,"20":7,"21":21,"22":3,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":2,"30":2,"31":1,"32":1,"33":2,"34":2,"35":6,"36":6,"37":6,"38":6,"39":2,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":2,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":1,"58":1,"59":1,"60":1,"61":1,"62":1,"63":1,"64":2,"65":1,"66":1,"67":1,"68":1,"69":1,"70":1,"71":1,"72":1,"73":1,"74":1,"75":1,"76":1,"77":1,"78":1,"79":1,"80":1,"81":1,"82":1,"83":1,"84":1,"85":1,"86":1,"87":1,"88":1,"89":1,"90":1,"91":1,"92":1,"93":1,"94":1,"95":1,"96":1,"97":1,"98":1,"99":1,"100":1,"101":1,"102":1,"103":1,"104":1,"105":1,"106":1,"107":1,"108":1,"109":1,"110":1,"111":1,"112":1,"113":1,"114":1,"115":1,"116":1,"117":1,"118":1,"119":1,"120":1,"121":1,"122":1},"f":{"0":2,"1":1,"2":6,"3":21,"4":3,"5":1,"6":1,"7":1,"8":1,"9":1,"10":2,"11":1,"12":1,"13":2,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":2,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":2,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":1,"58":1,"59":1,"60":1,"61":1,"62":1,"63":1,"64":1},"b":{"0":[1,1],"1":[1,5],"2":[7,14],"3":[3],"4":[1],"5":[1],"6":[1],"7":[1],"8":[4,2]},"inputSourceMap":{"version":3,"file":"/Users/somkheart/Documents/lprlinebot/lib/client.ts","sources":["/Users/somkheart/Documents/lprlinebot/lib/client.ts"],"names":[],"mappings":"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","sourcesContent":["import { Readable } from \"stream\";\nimport HTTPClient from \"./http\";\nimport * as Types from \"./types\";\nimport { AxiosResponse, AxiosRequestConfig } from \"axios\";\n\nimport { ensureJSON, toArray } from \"./utils\";\n\ntype ChatType = \"group\" | \"room\";\ntype RequestOption = {\n  retryKey: string;\n};\nimport {\n  MESSAGING_API_PREFIX,\n  DATA_API_PREFIX,\n  OAUTH_BASE_PREFIX,\n  OAUTH_BASE_PREFIX_V2_1,\n} from \"./endpoints\";\n\nexport default class Client {\n  public config: Types.ClientConfig;\n  private http: HTTPClient;\n\n  private requestOption: Partial<RequestOption> = {};\n\n  constructor(config: Types.ClientConfig) {\n    if (!config.channelAccessToken) {\n      throw new Error(\"no channel access token\");\n    }\n\n    this.config = config;\n    this.http = new HTTPClient({\n      defaultHeaders: {\n        Authorization: \"Bearer \" + this.config.channelAccessToken,\n      },\n      responseParser: this.parseHTTPResponse.bind(this),\n      ...config.httpConfig,\n    });\n  }\n  public setRequestOptionOnce(option: Partial<RequestOption>) {\n    this.requestOption = option;\n  }\n\n  private generateRequestConfig(): Partial<AxiosRequestConfig> {\n    const config: Partial<AxiosRequestConfig> = { headers: {} };\n    if (this.requestOption.retryKey) {\n      config.headers[\"X-Line-Retry-Key\"] = this.requestOption.retryKey;\n    }\n\n    // clear requestOption\n    this.requestOption = {};\n    return config;\n  }\n\n  private parseHTTPResponse(response: AxiosResponse) {\n    const { LINE_REQUEST_ID_HTTP_HEADER_NAME } = Types;\n    let resBody = {\n      ...response.data,\n    };\n    if (response.headers[LINE_REQUEST_ID_HTTP_HEADER_NAME]) {\n      resBody[LINE_REQUEST_ID_HTTP_HEADER_NAME] =\n        response.headers[LINE_REQUEST_ID_HTTP_HEADER_NAME];\n    }\n    return resBody;\n  }\n\n  public pushMessage(\n    to: string,\n    messages: Types.Message | Types.Message[],\n    notificationDisabled: boolean = false,\n  ): Promise<Types.MessageAPIResponseBase> {\n    return this.http.post(\n      `${MESSAGING_API_PREFIX}/message/push`,\n      {\n        messages: toArray(messages),\n        to,\n        notificationDisabled,\n      },\n      this.generateRequestConfig(),\n    );\n  }\n\n  public replyMessage(\n    replyToken: string,\n    messages: Types.Message | Types.Message[],\n    notificationDisabled: boolean = false,\n  ): Promise<Types.MessageAPIResponseBase> {\n    return this.http.post(`${MESSAGING_API_PREFIX}/message/reply`, {\n      messages: toArray(messages),\n      replyToken,\n      notificationDisabled,\n    });\n  }\n\n  public async multicast(\n    to: string[],\n    messages: Types.Message | Types.Message[],\n    notificationDisabled: boolean = false,\n  ): Promise<Types.MessageAPIResponseBase> {\n    return this.http.post(\n      `${MESSAGING_API_PREFIX}/message/multicast`,\n      {\n        messages: toArray(messages),\n        to,\n        notificationDisabled,\n      },\n      this.generateRequestConfig(),\n    );\n  }\n\n  public async narrowcast(\n    messages: Types.Message | Types.Message[],\n    recipient?: Types.ReceieptObject,\n    filter?: { demographic: Types.DemographicFilterObject },\n    limit?: { max: number },\n    notificationDisabled: boolean = false,\n  ): Promise<Types.MessageAPIResponseBase> {\n    return this.http.post(\n      `${MESSAGING_API_PREFIX}/message/narrowcast`,\n      {\n        messages: toArray(messages),\n        recipient,\n        filter,\n        limit,\n        notificationDisabled,\n      },\n      this.generateRequestConfig(),\n    );\n  }\n\n  public async broadcast(\n    messages: Types.Message | Types.Message[],\n    notificationDisabled: boolean = false,\n  ): Promise<Types.MessageAPIResponseBase> {\n    return this.http.post(\n      `${MESSAGING_API_PREFIX}/message/broadcast`,\n      {\n        messages: toArray(messages),\n        notificationDisabled,\n      },\n      this.generateRequestConfig(),\n    );\n  }\n\n  public async getProfile(userId: string): Promise<Types.Profile> {\n    const profile = await this.http.get<Types.Profile>(\n      `${MESSAGING_API_PREFIX}/profile/${userId}`,\n    );\n    return ensureJSON(profile);\n  }\n\n  private async getChatMemberProfile(\n    chatType: ChatType,\n    chatId: string,\n    userId: string,\n  ): Promise<Types.Profile> {\n    const profile = await this.http.get<Types.Profile>(\n      `${MESSAGING_API_PREFIX}/${chatType}/${chatId}/member/${userId}`,\n    );\n    return ensureJSON(profile);\n  }\n\n  public async getGroupMemberProfile(\n    groupId: string,\n    userId: string,\n  ): Promise<Types.Profile> {\n    return this.getChatMemberProfile(\"group\", groupId, userId);\n  }\n\n  public async getRoomMemberProfile(\n    roomId: string,\n    userId: string,\n  ): Promise<Types.Profile> {\n    return this.getChatMemberProfile(\"room\", roomId, userId);\n  }\n\n  private async getChatMemberIds(\n    chatType: ChatType,\n    chatId: string,\n  ): Promise<string[]> {\n    let memberIds: string[] = [];\n\n    let start: string;\n    do {\n      const res = await this.http.get<{ memberIds: string[]; next?: string }>(\n        `${MESSAGING_API_PREFIX}/${chatType}/${chatId}/members/ids`,\n        start ? { start } : null,\n      );\n      ensureJSON(res);\n      memberIds = memberIds.concat(res.memberIds);\n      start = res.next;\n    } while (start);\n\n    return memberIds;\n  }\n\n  public async getGroupMemberIds(groupId: string): Promise<string[]> {\n    return this.getChatMemberIds(\"group\", groupId);\n  }\n\n  public async getRoomMemberIds(roomId: string): Promise<string[]> {\n    return this.getChatMemberIds(\"room\", roomId);\n  }\n\n  public async getGroupMembersCount(\n    groupId: string,\n  ): Promise<Types.MembersCountResponse> {\n    const groupMemberCount = await this.http.get<Types.MembersCountResponse>(\n      `${MESSAGING_API_PREFIX}/group/${groupId}/members/count`,\n    );\n    return ensureJSON(groupMemberCount);\n  }\n\n  public async getRoomMembersCount(\n    roomId: string,\n  ): Promise<Types.MembersCountResponse> {\n    const roomMemberCount = await this.http.get<Types.MembersCountResponse>(\n      `${MESSAGING_API_PREFIX}/room/${roomId}/members/count`,\n    );\n    return ensureJSON(roomMemberCount);\n  }\n\n  public async getGroupSummary(\n    groupId: string,\n  ): Promise<Types.GroupSummaryResponse> {\n    const groupSummary = await this.http.get<Types.GroupSummaryResponse>(\n      `${MESSAGING_API_PREFIX}/group/${groupId}/summary`,\n    );\n    return ensureJSON(groupSummary);\n  }\n\n  public async getMessageContent(messageId: string): Promise<Readable> {\n    return this.http.getStream(\n      `${DATA_API_PREFIX}/message/${messageId}/content`,\n    );\n  }\n\n  private leaveChat(chatType: ChatType, chatId: string): Promise<any> {\n    return this.http.post(\n      `${MESSAGING_API_PREFIX}/${chatType}/${chatId}/leave`,\n    );\n  }\n\n  public async leaveGroup(groupId: string): Promise<any> {\n    return this.leaveChat(\"group\", groupId);\n  }\n\n  public async leaveRoom(roomId: string): Promise<any> {\n    return this.leaveChat(\"room\", roomId);\n  }\n\n  public async getRichMenu(\n    richMenuId: string,\n  ): Promise<Types.RichMenuResponse> {\n    const res = await this.http.get<Types.RichMenuResponse>(\n      `${MESSAGING_API_PREFIX}/richmenu/${richMenuId}`,\n    );\n    return ensureJSON(res);\n  }\n\n  public async createRichMenu(richMenu: Types.RichMenu): Promise<string> {\n    const res = await this.http.post<any>(\n      `${MESSAGING_API_PREFIX}/richmenu`,\n      richMenu,\n    );\n    return ensureJSON(res).richMenuId;\n  }\n\n  public async deleteRichMenu(richMenuId: string): Promise<any> {\n    return this.http.delete(`${MESSAGING_API_PREFIX}/richmenu/${richMenuId}`);\n  }\n\n  public async getRichMenuIdOfUser(userId: string): Promise<string> {\n    const res = await this.http.get<any>(\n      `${MESSAGING_API_PREFIX}/user/${userId}/richmenu`,\n    );\n    return ensureJSON(res).richMenuId;\n  }\n\n  public async linkRichMenuToUser(\n    userId: string,\n    richMenuId: string,\n  ): Promise<any> {\n    return this.http.post(\n      `${MESSAGING_API_PREFIX}/user/${userId}/richmenu/${richMenuId}`,\n    );\n  }\n\n  public async unlinkRichMenuFromUser(userId: string): Promise<any> {\n    return this.http.delete(`${MESSAGING_API_PREFIX}/user/${userId}/richmenu`);\n  }\n\n  public async linkRichMenuToMultipleUsers(\n    richMenuId: string,\n    userIds: string[],\n  ): Promise<any> {\n    return this.http.post(`${MESSAGING_API_PREFIX}/richmenu/bulk/link`, {\n      richMenuId,\n      userIds,\n    });\n  }\n\n  public async unlinkRichMenusFromMultipleUsers(\n    userIds: string[],\n  ): Promise<any> {\n    return this.http.post(`${MESSAGING_API_PREFIX}/richmenu/bulk/unlink`, {\n      userIds,\n    });\n  }\n\n  public async getRichMenuImage(richMenuId: string): Promise<Readable> {\n    return this.http.getStream(\n      `${DATA_API_PREFIX}/richmenu/${richMenuId}/content`,\n    );\n  }\n\n  public async setRichMenuImage(\n    richMenuId: string,\n    data: Buffer | Readable,\n    contentType?: string,\n  ): Promise<any> {\n    return this.http.postBinary(\n      `${DATA_API_PREFIX}/richmenu/${richMenuId}/content`,\n      data,\n      contentType,\n    );\n  }\n\n  public async getRichMenuList(): Promise<Array<Types.RichMenuResponse>> {\n    const res = await this.http.get<any>(\n      `${MESSAGING_API_PREFIX}/richmenu/list`,\n    );\n    return ensureJSON(res).richmenus;\n  }\n\n  public async setDefaultRichMenu(richMenuId: string): Promise<{}> {\n    return this.http.post(\n      `${MESSAGING_API_PREFIX}/user/all/richmenu/${richMenuId}`,\n    );\n  }\n\n  public async getDefaultRichMenuId(): Promise<string> {\n    const res = await this.http.get<any>(\n      `${MESSAGING_API_PREFIX}/user/all/richmenu`,\n    );\n    return ensureJSON(res).richMenuId;\n  }\n\n  public async deleteDefaultRichMenu(): Promise<{}> {\n    return this.http.delete(`${MESSAGING_API_PREFIX}/user/all/richmenu`);\n  }\n\n  public async getLinkToken(userId: string): Promise<string> {\n    const res = await this.http.post<any>(\n      `${MESSAGING_API_PREFIX}/user/${userId}/linkToken`,\n    );\n    return ensureJSON(res).linkToken;\n  }\n\n  public async getNumberOfSentReplyMessages(\n    date: string,\n  ): Promise<Types.NumberOfMessagesSentResponse> {\n    const res = await this.http.get<Types.NumberOfMessagesSentResponse>(\n      `${MESSAGING_API_PREFIX}/message/delivery/reply?date=${date}`,\n    );\n    return ensureJSON(res);\n  }\n\n  public async getNumberOfSentPushMessages(\n    date: string,\n  ): Promise<Types.NumberOfMessagesSentResponse> {\n    const res = await this.http.get<Types.NumberOfMessagesSentResponse>(\n      `${MESSAGING_API_PREFIX}/message/delivery/push?date=${date}`,\n    );\n    return ensureJSON(res);\n  }\n\n  public async getNumberOfSentMulticastMessages(\n    date: string,\n  ): Promise<Types.NumberOfMessagesSentResponse> {\n    const res = await this.http.get<Types.NumberOfMessagesSentResponse>(\n      `${MESSAGING_API_PREFIX}/message/delivery/multicast?date=${date}`,\n    );\n    return ensureJSON(res);\n  }\n\n  public async getNarrowcastProgress(\n    requestId: string,\n  ): Promise<Types.NarrowcastProgressResponse> {\n    const res = await this.http.get<Types.NarrowcastProgressResponse>(\n      `${MESSAGING_API_PREFIX}/message/progress/narrowcast?requestId=${requestId}`,\n    );\n    return ensureJSON(res);\n  }\n\n  public async getTargetLimitForAdditionalMessages(): Promise<\n    Types.TargetLimitForAdditionalMessages\n  > {\n    const res = await this.http.get<Types.TargetLimitForAdditionalMessages>(\n      `${MESSAGING_API_PREFIX}/message/quota`,\n    );\n    return ensureJSON(res);\n  }\n\n  public async getNumberOfMessagesSentThisMonth(): Promise<\n    Types.NumberOfMessagesSentThisMonth\n  > {\n    const res = await this.http.get<Types.NumberOfMessagesSentThisMonth>(\n      `${MESSAGING_API_PREFIX}/message/quota/consumption`,\n    );\n    return ensureJSON(res);\n  }\n\n  public async getNumberOfSentBroadcastMessages(\n    date: string,\n  ): Promise<Types.NumberOfMessagesSentResponse> {\n    const res = await this.http.get<Types.NumberOfMessagesSentResponse>(\n      `${MESSAGING_API_PREFIX}/message/delivery/broadcast?date=${date}`,\n    );\n    return ensureJSON(res);\n  }\n\n  public async getNumberOfMessageDeliveries(\n    date: string,\n  ): Promise<Types.NumberOfMessageDeliveriesResponse> {\n    const res = await this.http.get<Types.NumberOfMessageDeliveriesResponse>(\n      `${MESSAGING_API_PREFIX}/insight/message/delivery?date=${date}`,\n    );\n    return ensureJSON(res);\n  }\n\n  public async getNumberOfFollowers(\n    date: string,\n  ): Promise<Types.NumberOfFollowersResponse> {\n    const res = await this.http.get<Types.NumberOfFollowersResponse>(\n      `${MESSAGING_API_PREFIX}/insight/followers?date=${date}`,\n    );\n    return ensureJSON(res);\n  }\n\n  public async getFriendDemographics(): Promise<Types.FriendDemographics> {\n    const res = await this.http.get<Types.FriendDemographics>(\n      `${MESSAGING_API_PREFIX}/insight/demographic`,\n    );\n    return ensureJSON(res);\n  }\n\n  public async getUserInteractionStatistics(\n    requestId: string,\n  ): Promise<Types.UserInteractionStatistics> {\n    const res = await this.http.get<Types.UserInteractionStatistics>(\n      `${MESSAGING_API_PREFIX}/insight/message/event?requestId=${requestId}`,\n    );\n    return ensureJSON(res);\n  }\n\n  public async createUploadAudienceGroup(uploadAudienceGroup: {\n    description: string;\n    isIfaAudience: boolean;\n    audiences: { id: string }[];\n    uploadDescription?: string;\n  }) {\n    const res = await this.http.post<{\n      audienceGroupId: number;\n      type: string;\n      description: string;\n      created: number;\n    }>(`${MESSAGING_API_PREFIX}/audienceGroup/upload`, {\n      ...uploadAudienceGroup,\n    });\n    return ensureJSON(res);\n  }\n\n  public async updateUploadAudienceGroup(\n    uploadAudienceGroup: {\n      audienceGroupId: number;\n      description?: string;\n      uploadDescription?: string;\n      audiences: { id: string }[];\n    },\n    // for set request timeout\n    httpConfig?: Partial<AxiosRequestConfig>,\n  ) {\n    const res = await this.http.put<{}>(\n      `${MESSAGING_API_PREFIX}/audienceGroup/upload`,\n      {\n        ...uploadAudienceGroup,\n      },\n      httpConfig,\n    );\n    return ensureJSON(res);\n  }\n\n  public async createClickAudienceGroup(clickAudienceGroup: {\n    description: string;\n    requestId: string;\n    clickUrl?: string;\n  }) {\n    const res = await this.http.post<\n      {\n        audienceGroupId: number;\n        type: string;\n        created: number;\n      } & typeof clickAudienceGroup\n    >(`${MESSAGING_API_PREFIX}/audienceGroup/click`, {\n      ...clickAudienceGroup,\n    });\n    return ensureJSON(res);\n  }\n\n  public async createImpAudienceGroup(impAudienceGroup: {\n    requestId: string;\n    description: string;\n  }) {\n    const res = await this.http.post<\n      {\n        audienceGroupId: number;\n        type: string;\n        created: number;\n      } & typeof impAudienceGroup\n    >(`${MESSAGING_API_PREFIX}/audienceGroup/imp`, {\n      ...impAudienceGroup,\n    });\n    return ensureJSON(res);\n  }\n\n  public async setDescriptionAudienceGroup(\n    description: string,\n    audienceGroupId: string,\n  ) {\n    const res = await this.http.put<{}>(\n      `${MESSAGING_API_PREFIX}/audienceGroup/${audienceGroupId}/updateDescription`,\n      {\n        description,\n      },\n    );\n    return ensureJSON(res);\n  }\n\n  public async deleteAudienceGroup(audienceGroupId: string) {\n    const res = await this.http.delete<{}>(\n      `${MESSAGING_API_PREFIX}/audienceGroup/${audienceGroupId}`,\n    );\n    return ensureJSON(res);\n  }\n\n  public async getAudienceGroup(audienceGroupId: string) {\n    const res = await this.http.get<Types.AudienceGroup>(\n      `${MESSAGING_API_PREFIX}/audienceGroup/${audienceGroupId}`,\n    );\n    return ensureJSON(res);\n  }\n\n  public async getAudienceGroups(\n    page: number,\n    description?: string,\n    status?: Types.AudienceGroupStatus,\n    size?: number,\n    createRoute?: Types.AudienceGroupCreateRoute,\n    includesExternalPublicGroups?: boolean,\n  ) {\n    const res = await this.http.get<{\n      audienceGroups: Types.AudienceGroups;\n      hasNextPage: boolean;\n      totalCount: number;\n      readWriteAudienceGroupTotalCount: number;\n      page: number;\n      size: number;\n    }>(`${MESSAGING_API_PREFIX}/audienceGroup/list`, {\n      page,\n      description,\n      status,\n      size,\n      createRoute,\n      includesExternalPublicGroups,\n    });\n    return ensureJSON(res);\n  }\n\n  public async getAudienceGroupAuthorityLevel() {\n    const res = await this.http.get<{\n      authorityLevel: Types.AudienceGroupAuthorityLevel;\n    }>(`${MESSAGING_API_PREFIX}/audienceGroup/authorityLevel`);\n    return ensureJSON(res);\n  }\n\n  public async changeAudienceGroupAuthorityLevel(\n    authorityLevel: Types.AudienceGroupAuthorityLevel,\n  ) {\n    const res = await this.http.put<{}>(\n      `${MESSAGING_API_PREFIX}/audienceGroup/authorityLevel`,\n      { authorityLevel },\n    );\n    return ensureJSON(res);\n  }\n}\n\nexport class OAuth {\n  private http: HTTPClient;\n\n  constructor() {\n    this.http = new HTTPClient();\n  }\n\n  public issueAccessToken(\n    client_id: string,\n    client_secret: string,\n  ): Promise<Types.ChannelAccessToken> {\n    return this.http.postForm(`${OAUTH_BASE_PREFIX}/accessToken`, {\n      grant_type: \"client_credentials\",\n      client_id,\n      client_secret,\n    });\n  }\n\n  public revokeAccessToken(access_token: string): Promise<{}> {\n    return this.http.postForm(`${OAUTH_BASE_PREFIX}/revoke`, { access_token });\n  }\n\n  public issueChannelAccessTokenV2_1(\n    client_assertion: string,\n  ): Promise<Types.ChannelAccessToken> {\n    return this.http.postForm(`${OAUTH_BASE_PREFIX_V2_1}/token`, {\n      grant_type: \"client_credentials\",\n      client_assertion_type:\n        \"urn:ietf:params:oauth:client-assertion-type:jwt-bearer\",\n      client_assertion,\n    });\n  }\n\n  public getChannelAccessTokenKeyIdsV2_1(\n    client_assertion: string,\n  ): Promise<{ key_ids: string[] }> {\n    return this.http.get(`${OAUTH_BASE_PREFIX_V2_1}/tokens/kid`, {\n      client_assertion_type:\n        \"urn:ietf:params:oauth:client-assertion-type:jwt-bearer\",\n      client_assertion,\n    });\n  }\n\n  public revokeChannelAccessTokenV2_1(\n    client_id: string,\n    client_secret: string,\n    access_token: string,\n  ): Promise<{}> {\n    return this.http.postForm(`${OAUTH_BASE_PREFIX_V2_1}/revoke`, {\n      client_id,\n      client_secret,\n      access_token,\n    });\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"5a7f05441894a7c6c45aa9cf1c0cde71760029b1","contentHash":"f14229a03989d3fd6d3841a0ba07b412ef3f56b4a307600e2843c1db71d8486c"},"/Users/somkheart/Documents/lprlinebot/lib/http.ts":{"path":"/Users/somkheart/Documents/lprlinebot/lib/http.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":16},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":34}},"3":{"start":{"line":5,"column":21},"end":{"line":5,"column":44}},"4":{"start":{"line":6,"column":17},"end":{"line":6,"column":37}},"5":{"start":{"line":7,"column":11},"end":{"line":7,"column":33}},"6":{"start":{"line":8,"column":12},"end":{"line":8,"column":38}},"7":{"start":{"line":11,"column":8},"end":{"line":11,"column":29}},"8":{"start":{"line":12,"column":44},"end":{"line":12,"column":50}},"9":{"start":{"line":13,"column":8},"end":{"line":18,"column":11}},"10":{"start":{"line":19,"column":8},"end":{"line":19,"column":104}},"11":{"start":{"line":19,"column":55},"end":{"line":19,"column":58}},"12":{"start":{"line":19,"column":67},"end":{"line":19,"column":102}},"13":{"start":{"line":22,"column":20},"end":{"line":22,"column":60}},"14":{"start":{"line":23,"column":8},"end":{"line":23,"column":24}},"15":{"start":{"line":26,"column":20},"end":{"line":29,"column":10}},"16":{"start":{"line":30,"column":8},"end":{"line":30,"column":24}},"17":{"start":{"line":33,"column":20},"end":{"line":33,"column":174}},"18":{"start":{"line":34,"column":8},"end":{"line":34,"column":39}},"19":{"start":{"line":37,"column":35},"end":{"line":37,"column":46}},"20":{"start":{"line":38,"column":8},"end":{"line":41,"column":28}},"21":{"start":{"line":39,"column":12},"end":{"line":39,"column":39}},"22":{"start":{"line":41,"column":12},"end":{"line":41,"column":28}},"23":{"start":{"line":44,"column":20},"end":{"line":44,"column":173}},"24":{"start":{"line":45,"column":8},"end":{"line":45,"column":39}},"25":{"start":{"line":48,"column":20},"end":{"line":50,"column":10}},"26":{"start":{"line":51,"column":8},"end":{"line":51,"column":24}},"27":{"start":{"line":54,"column":23},"end":{"line":73,"column":12}},"28":{"start":{"line":55,"column":12},"end":{"line":72,"column":13}},"29":{"start":{"line":56,"column":16},"end":{"line":56,"column":28}},"30":{"start":{"line":58,"column":17},"end":{"line":72,"column":13}},"31":{"start":{"line":59,"column":16},"end":{"line":68,"column":19}},"32":{"start":{"line":60,"column":36},"end":{"line":60,"column":38}},"33":{"start":{"line":61,"column":31},"end":{"line":61,"column":32}},"34":{"start":{"line":62,"column":20},"end":{"line":65,"column":23}},"35":{"start":{"line":63,"column":24},"end":{"line":63,"column":44}},"36":{"start":{"line":64,"column":24},"end":{"line":64,"column":45}},"37":{"start":{"line":66,"column":20},"end":{"line":66,"column":80}},"38":{"start":{"line":66,"column":41},"end":{"line":66,"column":78}},"39":{"start":{"line":67,"column":20},"end":{"line":67,"column":45}},"40":{"start":{"line":71,"column":16},"end":{"line":71,"column":68}},"41":{"start":{"line":74,"column":20},"end":{"line":79,"column":10}},"42":{"start":{"line":80,"column":8},"end":{"line":80,"column":24}},"43":{"start":{"line":83,"column":20},"end":{"line":83,"column":63}},"44":{"start":{"line":84,"column":8},"end":{"line":84,"column":24}},"45":{"start":{"line":87,"column":8},"end":{"line":96,"column":9}},"46":{"start":{"line":88,"column":12},"end":{"line":88,"column":110}},"47":{"start":{"line":90,"column":13},"end":{"line":96,"column":9}},"48":{"start":{"line":91,"column":12},"end":{"line":91,"column":77}},"49":{"start":{"line":93,"column":13},"end":{"line":96,"column":9}},"50":{"start":{"line":95,"column":12},"end":{"line":95,"column":51}},"51":{"start":{"line":98,"column":8},"end":{"line":98,"column":19}},"52":{"start":{"line":101,"column":0},"end":{"line":101,"column":29}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":10,"column":4},"end":{"line":10,"column":5}},"loc":{"start":{"line":10,"column":29},"end":{"line":20,"column":5}},"line":10},"1":{"name":"(anonymous_1)","decl":{"start":{"line":19,"column":48},"end":{"line":19,"column":49}},"loc":{"start":{"line":19,"column":55},"end":{"line":19,"column":58}},"line":19},"2":{"name":"(anonymous_2)","decl":{"start":{"line":19,"column":60},"end":{"line":19,"column":61}},"loc":{"start":{"line":19,"column":67},"end":{"line":19,"column":102}},"line":19},"3":{"name":"(anonymous_3)","decl":{"start":{"line":21,"column":4},"end":{"line":21,"column":5}},"loc":{"start":{"line":21,"column":27},"end":{"line":24,"column":5}},"line":21},"4":{"name":"(anonymous_4)","decl":{"start":{"line":25,"column":4},"end":{"line":25,"column":5}},"loc":{"start":{"line":25,"column":33},"end":{"line":31,"column":5}},"line":25},"5":{"name":"(anonymous_5)","decl":{"start":{"line":32,"column":4},"end":{"line":32,"column":5}},"loc":{"start":{"line":32,"column":34},"end":{"line":35,"column":5}},"line":32},"6":{"name":"(anonymous_6)","decl":{"start":{"line":36,"column":4},"end":{"line":36,"column":5}},"loc":{"start":{"line":36,"column":23},"end":{"line":42,"column":5}},"line":36},"7":{"name":"(anonymous_7)","decl":{"start":{"line":43,"column":4},"end":{"line":43,"column":5}},"loc":{"start":{"line":43,"column":33},"end":{"line":46,"column":5}},"line":43},"8":{"name":"(anonymous_8)","decl":{"start":{"line":47,"column":4},"end":{"line":47,"column":5}},"loc":{"start":{"line":47,"column":30},"end":{"line":52,"column":5}},"line":47},"9":{"name":"(anonymous_9)","decl":{"start":{"line":53,"column":4},"end":{"line":53,"column":5}},"loc":{"start":{"line":53,"column":45},"end":{"line":81,"column":5}},"line":53},"10":{"name":"(anonymous_10)","decl":{"start":{"line":54,"column":30},"end":{"line":54,"column":31}},"loc":{"start":{"line":54,"column":42},"end":{"line":73,"column":9}},"line":54},"11":{"name":"(anonymous_11)","decl":{"start":{"line":59,"column":35},"end":{"line":59,"column":36}},"loc":{"start":{"line":59,"column":56},"end":{"line":68,"column":17}},"line":59},"12":{"name":"(anonymous_12)","decl":{"start":{"line":62,"column":36},"end":{"line":62,"column":37}},"loc":{"start":{"line":62,"column":47},"end":{"line":65,"column":21}},"line":62},"13":{"name":"(anonymous_13)","decl":{"start":{"line":66,"column":35},"end":{"line":66,"column":36}},"loc":{"start":{"line":66,"column":41},"end":{"line":66,"column":78}},"line":66},"14":{"name":"(anonymous_14)","decl":{"start":{"line":82,"column":4},"end":{"line":82,"column":5}},"loc":{"start":{"line":82,"column":30},"end":{"line":85,"column":5}},"line":82},"15":{"name":"(anonymous_15)","decl":{"start":{"line":86,"column":4},"end":{"line":86,"column":5}},"loc":{"start":{"line":86,"column":19},"end":{"line":99,"column":5}},"line":86}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":16},"end":{"line":10,"column":27}},"type":"default-arg","locations":[{"start":{"line":10,"column":25},"end":{"line":10,"column":27}}],"line":10},"1":{"loc":{"start":{"line":33,"column":136},"end":{"line":33,"column":160}},"type":"binary-expr","locations":[{"start":{"line":33,"column":136},"end":{"line":33,"column":142}},{"start":{"line":33,"column":146},"end":{"line":33,"column":160}}],"line":33},"2":{"loc":{"start":{"line":38,"column":8},"end":{"line":41,"column":28}},"type":"if","locations":[{"start":{"line":38,"column":8},"end":{"line":41,"column":28}},{"start":{"line":38,"column":8},"end":{"line":41,"column":28}}],"line":38},"3":{"loc":{"start":{"line":44,"column":135},"end":{"line":44,"column":159}},"type":"binary-expr","locations":[{"start":{"line":44,"column":135},"end":{"line":44,"column":141}},{"start":{"line":44,"column":145},"end":{"line":44,"column":159}}],"line":44},"4":{"loc":{"start":{"line":55,"column":12},"end":{"line":72,"column":13}},"type":"if","locations":[{"start":{"line":55,"column":12},"end":{"line":72,"column":13}},{"start":{"line":55,"column":12},"end":{"line":72,"column":13}}],"line":55},"5":{"loc":{"start":{"line":58,"column":17},"end":{"line":72,"column":13}},"type":"if","locations":[{"start":{"line":58,"column":17},"end":{"line":72,"column":13}},{"start":{"line":58,"column":17},"end":{"line":72,"column":13}}],"line":58},"6":{"loc":{"start":{"line":76,"column":32},"end":{"line":76,"column":87}},"type":"binary-expr","locations":[{"start":{"line":76,"column":32},"end":{"line":76,"column":43}},{"start":{"line":76,"column":47},"end":{"line":76,"column":87}}],"line":76},"7":{"loc":{"start":{"line":87,"column":8},"end":{"line":96,"column":9}},"type":"if","locations":[{"start":{"line":87,"column":8},"end":{"line":96,"column":9}},{"start":{"line":87,"column":8},"end":{"line":96,"column":9}}],"line":87},"8":{"loc":{"start":{"line":90,"column":13},"end":{"line":96,"column":9}},"type":"if","locations":[{"start":{"line":90,"column":13},"end":{"line":96,"column":9}},{"start":{"line":90,"column":13},"end":{"line":96,"column":9}}],"line":90},"9":{"loc":{"start":{"line":93,"column":13},"end":{"line":96,"column":9}},"type":"if","locations":[{"start":{"line":93,"column":13},"end":{"line":96,"column":9}},{"start":{"line":93,"column":13},"end":{"line":96,"column":9}}],"line":93}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":14,"8":14,"9":14,"10":14,"11":78,"12":8,"13":36,"14":34,"15":3,"16":3,"17":30,"18":24,"19":27,"20":27,"21":21,"22":6,"23":3,"24":3,"25":4,"26":4,"27":5,"28":5,"29":3,"30":2,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":4,"42":4,"43":6,"44":6,"45":8,"46":7,"47":1,"48":1,"49":0,"50":0,"51":0,"52":1},"f":{"0":14,"1":78,"2":8,"3":36,"4":3,"5":30,"6":27,"7":3,"8":4,"9":5,"10":5,"11":1,"12":1,"13":1,"14":6,"15":8},"b":{"0":[2],"1":[30,6],"2":[21,6],"3":[3,0],"4":[3,2],"5":[1,1],"6":[4,3],"7":[7,1],"8":[1,0],"9":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/somkheart/Documents/lprlinebot/lib/http.ts","sources":["/Users/somkheart/Documents/lprlinebot/lib/http.ts"],"names":[],"mappings":"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","sourcesContent":["import axios, {\n  AxiosInstance,\n  AxiosError,\n  AxiosResponse,\n  AxiosRequestConfig,\n} from \"axios\";\nimport { Readable } from \"stream\";\nimport { HTTPError, ReadError, RequestError } from \"./exceptions\";\nimport * as fileType from \"file-type\";\nimport * as qs from \"querystring\";\n\nconst pkg = require(\"../package.json\");\n\ninterface httpClientConfig extends Partial<AxiosRequestConfig> {\n  baseURL?: string;\n  defaultHeaders?: any;\n  responseParser?: <T>(res: AxiosResponse) => T;\n}\n\nexport default class HTTPClient {\n  private instance: AxiosInstance;\n  private config: httpClientConfig;\n\n  constructor(config: httpClientConfig = {}) {\n    this.config = config;\n    const { baseURL, defaultHeaders } = config;\n    this.instance = axios.create({\n      baseURL,\n      headers: Object.assign({}, defaultHeaders, {\n        \"User-Agent\": `${pkg.name}/${pkg.version}`,\n      }),\n    });\n\n    this.instance.interceptors.response.use(\n      res => res,\n      err => Promise.reject(this.wrapError(err)),\n    );\n  }\n\n  public async get<T>(url: string, params?: any): Promise<T> {\n    const res = await this.instance.get(url, { params });\n    return res.data;\n  }\n\n  public async getStream(url: string, params?: any): Promise<Readable> {\n    const res = await this.instance.get(url, {\n      params,\n      responseType: \"stream\",\n    });\n    return res.data as Readable;\n  }\n\n  public async post<T>(\n    url: string,\n    body?: any,\n    config?: Partial<AxiosRequestConfig>,\n  ): Promise<T> {\n    const res = await this.instance.post(url, body, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...(config && config.headers),\n      },\n      ...config,\n    });\n\n    return this.responseParse(res);\n  }\n\n  private responseParse(res: AxiosResponse) {\n    const { responseParser } = this.config;\n    if (responseParser) return responseParser(res);\n    else return res.data;\n  }\n\n  public async put<T>(\n    url: string,\n    body?: any,\n    config?: Partial<AxiosRequestConfig>,\n  ): Promise<T> {\n    const res = await this.instance.put(url, body, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...(config && config.headers),\n      },\n      ...config,\n    });\n\n    return this.responseParse(res);\n  }\n\n  public async postForm<T>(url: string, body?: any): Promise<T> {\n    const res = await this.instance.post(url, qs.stringify(body), {\n      headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\n    });\n\n    return res.data;\n  }\n\n  public async postBinary<T>(\n    url: string,\n    data: Buffer | Readable,\n    contentType?: string,\n  ): Promise<T> {\n    const buffer = await (async (): Promise<Buffer> => {\n      if (Buffer.isBuffer(data)) {\n        return data;\n      } else if (data instanceof Readable) {\n        return new Promise<Buffer>((resolve, reject) => {\n          const buffers: Buffer[] = [];\n          let size = 0;\n          data.on(\"data\", (chunk: Buffer) => {\n            buffers.push(chunk);\n            size += chunk.length;\n          });\n          data.on(\"end\", () => resolve(Buffer.concat(buffers, size)));\n          data.on(\"error\", reject);\n        });\n      } else {\n        throw new Error(\"invalid data type for postBinary\");\n      }\n    })();\n\n    const res = await this.instance.post(url, buffer, {\n      headers: {\n        \"Content-Type\": contentType || (await fileType.fromBuffer(buffer)).mime,\n        \"Content-Length\": buffer.length,\n      },\n    });\n\n    return res.data;\n  }\n\n  public async delete<T>(url: string, params?: any): Promise<T> {\n    const res = await this.instance.delete(url, { params });\n    return res.data;\n  }\n\n  private wrapError(err: AxiosError): Error {\n    if (err.response) {\n      return new HTTPError(\n        err.message,\n        err.response.status,\n        err.response.statusText,\n        err,\n      );\n    } else if (err.code) {\n      return new RequestError(err.message, err.code, err);\n    } else if (err.config) {\n      // unknown, but from axios\n      return new ReadError(err);\n    }\n\n    // otherwise, just rethrow\n    return err;\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"20c124a93ba59bbd41f7b0dd620768e0ea5a117c","contentHash":"7d102390f7bb056151875247cf2065d9939f2926e6e6f1718e6661c0f08e3419"},"/Users/somkheart/Documents/lprlinebot/lib/exceptions.ts":{"path":"/Users/somkheart/Documents/lprlinebot/lib/exceptions.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":131}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":23}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":35}},"4":{"start":{"line":10,"column":0},"end":{"line":10,"column":62}},"5":{"start":{"line":13,"column":8},"end":{"line":13,"column":23}},"6":{"start":{"line":14,"column":8},"end":{"line":14,"column":23}},"7":{"start":{"line":17,"column":0},"end":{"line":17,"column":40}},"8":{"start":{"line":20,"column":8},"end":{"line":20,"column":23}},"9":{"start":{"line":21,"column":8},"end":{"line":21,"column":25}},"10":{"start":{"line":22,"column":8},"end":{"line":22,"column":43}},"11":{"start":{"line":25,"column":0},"end":{"line":25,"column":36}},"12":{"start":{"line":28,"column":8},"end":{"line":28,"column":37}},"13":{"start":{"line":29,"column":8},"end":{"line":29,"column":43}},"14":{"start":{"line":32,"column":0},"end":{"line":32,"column":30}},"15":{"start":{"line":35,"column":8},"end":{"line":35,"column":23}},"16":{"start":{"line":36,"column":8},"end":{"line":36,"column":37}},"17":{"start":{"line":37,"column":8},"end":{"line":37,"column":43}},"18":{"start":{"line":38,"column":8},"end":{"line":38,"column":43}},"19":{"start":{"line":41,"column":0},"end":{"line":41,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":4},"end":{"line":5,"column":5}},"loc":{"start":{"line":5,"column":36},"end":{"line":8,"column":5}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":12,"column":4},"end":{"line":12,"column":5}},"loc":{"start":{"line":12,"column":30},"end":{"line":15,"column":5}},"line":12},"2":{"name":"(anonymous_2)","decl":{"start":{"line":19,"column":4},"end":{"line":19,"column":5}},"loc":{"start":{"line":19,"column":46},"end":{"line":23,"column":5}},"line":19},"3":{"name":"(anonymous_3)","decl":{"start":{"line":27,"column":4},"end":{"line":27,"column":5}},"loc":{"start":{"line":27,"column":31},"end":{"line":30,"column":5}},"line":27},"4":{"name":"(anonymous_4)","decl":{"start":{"line":34,"column":4},"end":{"line":34,"column":5}},"loc":{"start":{"line":34,"column":67},"end":{"line":39,"column":5}},"line":34}},"branchMap":{},"s":{"0":1,"1":1,"2":3,"3":3,"4":1,"5":2,"6":2,"7":1,"8":1,"9":1,"10":1,"11":1,"12":0,"13":0,"14":1,"15":7,"16":7,"17":7,"18":7,"19":1},"f":{"0":3,"1":2,"2":1,"3":0,"4":7},"b":{},"inputSourceMap":{"version":3,"file":"/Users/somkheart/Documents/lprlinebot/lib/exceptions.ts","sources":["/Users/somkheart/Documents/lprlinebot/lib/exceptions.ts"],"names":[],"mappings":";;;AAAA,MAAa,yBAA0B,SAAQ,KAAK;IAClD,YAAY,OAAe,EAAS,SAAkB;QACpD,KAAK,CAAC,OAAO,CAAC,CAAC;QADmB,cAAS,GAAT,SAAS,CAAS;IAEtD,CAAC;CACF;AAJD,8DAIC;AAED,MAAa,cAAe,SAAQ,KAAK;IACvC,YAAY,OAAe,EAAS,GAAQ;QAC1C,KAAK,CAAC,OAAO,CAAC,CAAC;QADmB,QAAG,GAAH,GAAG,CAAK;IAE5C,CAAC;CACF;AAJD,wCAIC;AAED,MAAa,YAAa,SAAQ,KAAK;IACrC,YACE,OAAe,EACR,IAAY,EACX,aAAoB;QAE5B,KAAK,CAAC,OAAO,CAAC,CAAC;QAHR,SAAI,GAAJ,IAAI,CAAQ;QACX,kBAAa,GAAb,aAAa,CAAO;IAG9B,CAAC;CACF;AARD,oCAQC;AAED,MAAa,SAAU,SAAQ,KAAK;IAClC,YAAoB,aAAoB;QACtC,KAAK,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;QADX,kBAAa,GAAb,aAAa,CAAO;IAExC,CAAC;CACF;AAJD,8BAIC;AAED,MAAa,SAAU,SAAQ,KAAK;IAClC,YACE,OAAe,EACR,UAAkB,EAClB,aAAqB,EACrB,aAAkB;QAEzB,KAAK,CAAC,OAAO,CAAC,CAAC;QAJR,eAAU,GAAV,UAAU,CAAQ;QAClB,kBAAa,GAAb,aAAa,CAAQ;QACrB,kBAAa,GAAb,aAAa,CAAK;IAG3B,CAAC;CACF;AATD,8BASC","sourcesContent":["export class SignatureValidationFailed extends Error {\n  constructor(message: string, public signature?: string) {\n    super(message);\n  }\n}\n\nexport class JSONParseError extends Error {\n  constructor(message: string, public raw: any) {\n    super(message);\n  }\n}\n\nexport class RequestError extends Error {\n  constructor(\n    message: string,\n    public code: string,\n    private originalError: Error,\n  ) {\n    super(message);\n  }\n}\n\nexport class ReadError extends Error {\n  constructor(private originalError: Error) {\n    super(originalError.message);\n  }\n}\n\nexport class HTTPError extends Error {\n  constructor(\n    message: string,\n    public statusCode: number,\n    public statusMessage: string,\n    public originalError: any,\n  ) {\n    super(message);\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"9dec8dc39151eead8ca28c7317d8b29d098e824a","contentHash":"2c7d001d30add090575c1da10c24d55e527e47abfad8db4824725435bc715d37"},"/Users/somkheart/Documents/lprlinebot/lib/types.ts":{"path":"/Users/somkheart/Documents/lprlinebot/lib/types.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":92}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":63}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":61}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/Users/somkheart/Documents/lprlinebot/lib/types.ts","sources":["/Users/somkheart/Documents/lprlinebot/lib/types.ts"],"names":[],"mappings":";;;AA68Da,QAAA,gCAAgC,GAAG,mBAAmB,CAAC;AAKvD,QAAA,+BAA+B,GAAG,kBAAkB,CAAC","sourcesContent":["import { AxiosRequestConfig } from \"axios\";\n\nexport interface Config {\n  channelAccessToken?: string;\n  channelSecret?: string;\n}\n\nexport interface ClientConfig extends Config {\n  channelAccessToken: string;\n  httpConfig?: Partial<AxiosRequestConfig>;\n}\n\nexport interface MiddlewareConfig extends Config {\n  channelSecret: string;\n}\n\nexport type Profile = {\n  displayName: string;\n  userId: string;\n  pictureUrl: string;\n  statusMessage: string;\n  language?: string;\n};\n\n/**\n * Request body which is sent by webhook.\n *\n * @see [Request body](https://developers.line.biz/en/reference/messaging-api/#request-body)\n */\nexport type WebhookRequestBody = {\n  /**\n   * User ID of a bot that should receive webhook events. The user ID value is a string that matches the regular expression, U[0-9a-f]{32}.\n   */\n  destination: string;\n\n  /**\n   * Information about the event\n   */\n  events: Array<WebhookEvent>;\n};\n\n/**\n * JSON objects which contain events generated on the LINE Platform.\n *\n * @see [Webhook event objects](https://developers.line.biz/en/reference/messaging-api/#webhook-event-objects)\n */\nexport type WebhookEvent =\n  | MessageEvent\n  | FollowEvent\n  | UnfollowEvent\n  | JoinEvent\n  | LeaveEvent\n  | MemberJoinEvent\n  | MemberLeaveEvent\n  | PostbackEvent\n  | BeaconEvent\n  | AccountLinkEvent\n  | DeviceLinkEvent\n  | DeviceUnlinkEvent\n  | LINEThingsScenarioExecutionEvent;\n\nexport type EventBase = {\n  /**\n   * Channel state.\n   *\n   * `active`: The channel is active. You can send a reply message or push message from the bot server that received this webhook event.\n   *\n   * `standby`: The channel is waiting. The bot server that received this webhook event shouldn't send any messages.\n   */\n  mode: \"active\" | \"standby\";\n  /**\n   * Time of the event in milliseconds\n   */\n  timestamp: number;\n  /**\n   * Source user, group, or room object with information about the source of the event.\n   */\n  source: EventSource;\n};\n\nexport type EventSource = User | Group | Room;\n\nexport type User = { type: \"user\"; userId: string };\n\nexport type Group = {\n  type: \"group\";\n  groupId: string;\n  /**\n   * ID of the source user.\n   *\n   * Only included in [message events](https://developers.line.biz/en/reference/messaging-api/#message-event).\n   * Not included if the user has not agreed to the\n   * [Official Accounts Terms of Use](https://developers.line.biz/en/docs/messaging-api/user-consent/).\n   */\n  userId?: string;\n};\n\nexport type Room = {\n  type: \"room\";\n  roomId: string;\n  /**\n   * ID of the source user.\n   *\n   * Only included in [message events](https://developers.line.biz/en/reference/messaging-api/#message-event).\n   * Not included if the user has not agreed to the\n   * [Official Accounts Terms of Use](https://developers.line.biz/en/docs/messaging-api/user-consent/).\n   */\n  userId?: string;\n};\n\nexport type ReplyableEvent = EventBase & { replyToken: string };\n\n/**\n * Webhook event object which contains the sent message.\n *\n * The `message` property contains a message object which corresponds with the\n * message type. You can reply to message events.\n *\n * @see [Message event](https://developers.line.biz/en/reference/messaging-api/#message-event)\n */\nexport type MessageEvent = {\n  type: \"message\";\n  message: EventMessage;\n} & ReplyableEvent;\n\n/**\n * Event object for when your account is added as a friend (or unblocked).\n */\nexport type FollowEvent = { type: \"follow\" } & ReplyableEvent;\n\n/**\n * Event object for when your account is blocked.\n */\nexport type UnfollowEvent = { type: \"unfollow\" } & EventBase;\n\n/**\n * Event object for when your bot joins a group or room. You can reply to join events.\n *\n * A join event is triggered at different times for groups and rooms.\n *\n * - For groups: A join event is sent when a user invites your bot.\n * - For rooms: A join event is sent when the first event (for example when a\n *     user sends a message or is added to the room) occurs after your bot is\n *     added.\n */\nexport type JoinEvent = { type: \"join\" } & ReplyableEvent;\n\n/**\n * Event object for when a user removes your bot from a group or a room.\n */\nexport type LeaveEvent = { type: \"leave\" } & EventBase;\n\n/**\n * Event object for when a user joins a [group](https://developers.line.biz/en/docs/messaging-api/group-chats/#group)\n * or [room](https://developers.line.biz/en/docs/messaging-api/group-chats/#room) that the bot is in.\n */\nexport type MemberJoinEvent = {\n  type: \"memberJoined\";\n  /**\n   * User ID of users who joined\n   * Array of [source user](https://developers.line.biz/en/reference/messaging-api/#source-user) objects\n   */\n  joined: { members: Array<User> };\n} & ReplyableEvent;\n\n/**\n * Event object for when a user leaves a [group](https://developers.line.biz/en/docs/messaging-api/group-chats/#group)\n * or [room](https://developers.line.biz/en/docs/messaging-api/group-chats/#room) that the bot is in.\n */\nexport type MemberLeaveEvent = {\n  type: \"memberLeft\";\n  /**\n   * User ID of users who left\n   * Array of [source user](https://developers.line.biz/en/reference/messaging-api/#source-user) objects\n   */\n  left: { members: Array<User> };\n} & EventBase;\n\n/**\n * Event object for when a user performs an action on a\n * [template message](https://developers.line.biz/en/reference/messaging-api/#template-messages).\n */\nexport type PostbackEvent = {\n  type: \"postback\";\n  postback: Postback;\n} & ReplyableEvent;\n\n/**\n * Event object for when a user enters or leaves the range of a\n * [LINE Beacon](https://developers.line.biz/en/docs/messaging-api/using-beacons/).\n */\nexport type BeaconEvent = ReplyableEvent & {\n  type: \"beacon\";\n  beacon: {\n    /**\n     * `leave` will be deprecated\n     */\n    type: \"enter\" | \"leave\" | \"banner\" | \"stay\";\n\n    /**\n     * Hardware ID of the beacon that was detected\n     */\n    hwid: string;\n\n    /**\n     * Device message of beacon that was detected.\n     *\n     * This message consists of data generated by the beacon to send notifications to bots.\n     * Only included in webhooks from devices that support the \"device message\" property.\n     * For more information, see the\n     * [LINE Simple Beacon specification](https://github.com/line/line-simple-beacon/blob/master/README.en.md/#line-simple-beacon-frame).\n     */\n    dm?: string;\n  };\n};\n\n/**\n * Event object for when a user has linked his/her LINE account with a provider's service account.\n */\nexport type AccountLinkEvent = ReplyableEvent & {\n  type: \"accountLink\";\n  link: {\n    result: \"ok\" | \"failed\";\n\n    /**\n     * Specified nonce when verifying the user ID\n     */\n    nonce: string;\n  };\n};\n\n/**\n * Indicates that a LINE Things-compatible device has been linked with LINE by a user operation.\n * For more information, see [Receiving device link events via webhook](https://developers.line.biz/en/docs/line-things/develop-bot/#link-event).\n */\nexport type DeviceLinkEvent = ReplyableEvent & {\n  type: \"things\";\n  things: {\n    /**\n     * Device ID of the LINE Things-compatible device that was linked with LINE\n     */\n    deviceId: string;\n    type: \"link\";\n  };\n};\n\n/**\n * Indicates that a LINE Things-compatible device has been unlinked from LINE by a user operation.\n * For more information, see [Receiving device unlink events via webhook](https://developers.line.biz/en/docs/line-things/develop-bot/#unlink-event).\n */\nexport type DeviceUnlinkEvent = ReplyableEvent & {\n  type: \"things\";\n  things: {\n    /**\n     * Device ID of the LINE Things-compatible device that was unlinked with LINE\n     */\n    deviceId: string;\n    type: \"unlink\";\n  };\n};\n\nexport type LINEThingsScenarioExecutionEvent = ReplyableEvent & {\n  type: \"things\";\n  things: {\n    type: \"scenarioResult\";\n    /**\n     * Device ID of the device that executed the scenario\n     */\n    deviceId: string;\n    result: {\n      /**\n       * Scenario ID executed\n       */\n      scenarioId: string;\n      /**\n       * Revision number of the scenario set containing the executed scenario\n       */\n      revision: number;\n      /**\n       * Timestamp for when execution of scenario action started (milliseconds, LINE app time)\n       */\n      startTime: number;\n      /**\n       * Timestamp for when execution of scenario was completed (milliseconds, LINE app time)\n       */\n      endtime: number;\n      /**\n       * Scenario execution completion status\n       * See also [things.resultCode definitions](https://developers.line.biz/en/reference/messaging-api/#things-resultcode).\n       */\n      resultCode: \"success\" | \"gatt_error\" | \"runtime_error\";\n      /**\n       * Execution result of individual operations specified in action\n       * Note that an array of actions specified in a scenario has the following characteristics\n       *  - The actions defined in a scenario are performed sequentially, from top to bottom.\n       *  - Each action produces some result when executed.\n       *    Even actions that do not generate data, such as `SLEEP`, return an execution result of type `void`.\n       *    The number of items in an action array may be 0.\n       *\n       * Therefore, things.actionResults has the following properties:\n       *  - The number of items in the array matches the number of actions defined in the scenario.\n       *  - The order of execution results matches the order in which actions are performed.\n       *    That is, in a scenario set with multiple `GATT_READ` actions,\n       *    the results are returned in the order in which each individual `GATT_READ` action was performed.\n       *  - If 0 actions are defined in the scenario, the number of items in things.actionResults will be 0.\n       */\n      actionResults: Array<LINEThingsActionResult>;\n      /**\n       * Data contained in notification\n       * The value is Base64-encoded binary data.\n       * Only included for scenarios where `trigger.type = BLE_NOTIFICATION`.\n       */\n      bleNotificationPayload?: string;\n      /**\n       * Error reason\n       */\n      errorReason?: string;\n    };\n  };\n};\n\nexport type LINEThingsActionResult = {\n  /**\n   * `void`, `binary`\n   * Depends on `type` of the executed action.\n   * This property is always included if `things.actionResults` is not empty.\n   */\n  type: \"void\" | \"binary\";\n  /**\n   * Base64-encoded binary data\n   *  This property is always included when `things.actionResults[].type` is `binary`.\n   */\n  data?: string;\n};\n\nexport type EventMessage =\n  | TextEventMessage\n  | ImageEventMessage\n  | VideoEventMessage\n  | AudioEventMessage\n  | LocationEventMessage\n  | FileEventMessage\n  | StickerEventMessage;\n\nexport type EventMessageBase = { id: string };\n\n/**\n * Message object which contains the text sent from the source.\n */\nexport type TextEventMessage = {\n  type: \"text\";\n  text: string;\n  /**\n   * Sendable LINE emojis\n   */\n  emojis?: {\n    index: number;\n    length: number;\n    productId: string;\n    emojiId: string;\n  }[];\n} & EventMessageBase;\n\nexport type ContentProvider<WithPreview extends boolean = true> =\n  | {\n      /**\n       * The content is provided by LINE.\n       *\n       * The data itself can be retrieved from the content API.\n       */\n      type: \"line\";\n    }\n  | {\n      /**\n       * The content is provided by a provider other than LINE\n       */\n      type: \"external\";\n      /**\n       * URL of the content. Only included when contentProvider.type is external.\n       */\n      originalContentUrl: string;\n      /**\n       * URL of the content preview. Only included when contentProvider.type is external.\n       *\n       * For contents without preview (e.g. audio), it's undefined.\n       */\n      previewImageUrl: WithPreview extends true ? string : undefined;\n    };\n\n/**\n * Message object which contains the image content sent from the source.\n * The binary image data can be retrieved using Client#getMessageContent.\n */\nexport type ImageEventMessage = {\n  type: \"image\";\n  contentProvider: ContentProvider;\n} & EventMessageBase;\n\n/**\n * Message object which contains the video content sent from the source.\n * The binary video data can be retrieved using Client#getMessageContent.\n */\nexport type VideoEventMessage = {\n  type: \"video\";\n  contentProvider: ContentProvider;\n} & EventMessageBase;\n\n/**\n * Message object which contains the audio content sent from the source.\n * The binary audio data can be retrieved using Client#getMessageContent.\n */\nexport type AudioEventMessage = {\n  type: \"audio\";\n  duration: number;\n  contentProvider: ContentProvider<false>;\n} & EventMessageBase;\n\n/**\n * Message object which contains the file sent from the source.\n * The binary data can be retrieved using Client#getMessageContent.\n */\nexport type FileEventMessage = {\n  type: \"file\";\n  fileName: string;\n  fileSize: string;\n} & EventMessageBase;\n\n/**\n * Message object which contains the location data sent from the source.\n */\nexport type LocationEventMessage = {\n  type: \"location\";\n  title: string;\n  address: string;\n  latitude: number;\n  longitude: number;\n} & EventMessageBase;\n\n/**\n * Message object which contains the sticker data sent from the source.\n * For a list of basic LINE stickers and sticker IDs, see\n * [sticker list](https://developers.line.biz/media/messaging-api/sticker_list.pdf).\n */\nexport type StickerEventMessage = {\n  type: \"sticker\";\n  packageId: string;\n  stickerId: string;\n  stickerResourceType:\n    | \"STATIC\"\n    | \"ANIMATION\"\n    | \"SOUND\"\n    | \"ANIMATION_SOUND\"\n    | \"POPUP\"\n    | \"POPUP_SOUND\"\n    | \"NAME_TEXT\";\n} & EventMessageBase;\n\nexport type Postback = {\n  data: string;\n  /**\n   * Object with the date and time selected by a user through a\n   * [datetime picker action](https://developers.line.biz/en/reference/messaging-api/#datetime-picker-action).\n   * Only returned for postback actions via a\n   * [datetime picker action](https://developers.line.biz/en/reference/messaging-api/#datetime-picker-action).\n   * The `full-date`, `time-hour`, and `time-minute` formats follow the\n   * [RFC3339 protocol](https://www.ietf.org/rfc/rfc3339.txt).\n   */\n  params?: {\n    /**\n     * Date selected by user. Only included in the `date` mode.\n     */\n    date?: string;\n    /**\n     * Time selected by the user. Only included in the `time` mode.\n     */\n    time?: string;\n    /**\n     * Date and time selected by the user. Only included in the `datetime` mode.\n     */\n    datetime?: string;\n  };\n};\n\n/**\n * JSON object which contains the contents of the message you send.\n *\n * @see [Message objects](https://developers.line.biz/en/reference/messaging-api/#message-objects)\n */\nexport type Message =\n  | TextMessage\n  | ImageMessage\n  | VideoMessage\n  | AudioMessage\n  | LocationMessage\n  | StickerMessage\n  | ImageMapMessage\n  | TemplateMessage\n  | FlexMessage;\n\n/**\n * @see [Common properties for messages](https://developers.line.biz/en/reference/messaging-api/#common-properties-for-messages)\n */\nexport type MessageCommon = {\n  /**\n   * For the quick reply feature.\n   * For more information, see [Using quick replies](https://developers.line.biz/en/docs/messaging-api/using-quick-reply/).\n   *\n   * If the user receives multiple\n   * [message objects](https://developers.line.biz/en/reference/messaging-api/#message-objects),\n   * the quickReply property of the last message object is displayed.\n   */\n  quickReply?: QuickReply;\n  /**\n   * [Change icon and display name](https://developers.line.biz/en/docs/messaging-api/icon-nickname-switch/)\n   *\n   * When sending a message from the LINE Official Account, you can specify the `sender.name` and the `sender.iconUrl` properties in [Message objects](https://developers.line.biz/en/reference/messaging-api/#message-objects).\n   */\n  sender?: Sender;\n};\n\n/**\n * @see [Text message](https://developers.line.biz/en/reference/messaging-api/#text-message)\n */\nexport type TextMessage = MessageCommon & {\n  type: \"text\";\n  /**\n   * Message text. You can include the following emoji:\n   *\n   * - Unicode emoji\n   * - LINE original emoji\n   *   ([Unicode codepoint table for LINE original emoji](https://developers.line.biz/media/messaging-api/emoji-list.pdf))\n   *\n   * Max: 2000 characters\n   */\n  text: string;\n};\n\n/**\n * @see [Image message](https://developers.line.biz/en/reference/messaging-api/#image-message)\n */\nexport type ImageMessage = MessageCommon & {\n  type: \"image\";\n  /**\n   * Image URL (Max: 1000 characters)\n   *\n   * - **HTTPS**\n   * - JPEG\n   * - Max: 1024 x 1024\n   * - Max: 1 MB\n   */\n  originalContentUrl: string;\n  /**\n   * Preview image URL (Max: 1000 characters)\n   *\n   * - **HTTPS**\n   * - JPEG\n   * - Max: 240 x 240\n   * - Max: 1 MB\n   */\n  previewImageUrl: string;\n};\n\n/**\n * @see [Video message](https://developers.line.biz/en/reference/messaging-api/#video-message)\n */\nexport type VideoMessage = MessageCommon & {\n  type: \"video\";\n  /**\n   * URL of video file (Max: 1000 characters)\n   *\n   * - **HTTPS**\n   * - mp4\n   * - Max: 1 minute\n   * - Max: 10 MB\n   *\n   * A very wide or tall video may be cropped when played in some environments.\n   */\n  originalContentUrl: string;\n  /**\n   * URL of preview image (Max: 1000 characters)\n   *\n   * - **HTTPS**\n   * - JPEG\n   * - Max: 240 x 240\n   * - Max: 1 MB\n   */\n  previewImageUrl: string;\n};\n\n/**\n * @see [Audio message](https://developers.line.biz/en/reference/messaging-api/#audio-message)\n */\nexport type AudioMessage = MessageCommon & {\n  type: \"audio\";\n  /**\n   * URL of audio file (Max: 1000 characters)\n   *\n   * - **HTTPS**\n   * - m4a\n   * - Max: 1 minute\n   * - Max: 10 MB\n   */\n  originalContentUrl: string;\n  /**\n   * Length of audio file (milliseconds)\n   */\n  duration: number;\n};\n\n/**\n * @see [Location message](https://developers.line.biz/en/reference/messaging-api/#location-message)\n */\nexport type LocationMessage = MessageCommon & {\n  type: \"location\";\n  /**\n   * Title (Max: 100 characters)\n   */\n  title: string;\n  /**\n   * Address (Max: 100 characters)\n   */\n  address: string;\n  latitude: number;\n  longitude: number;\n};\n\n/**\n * @see [Sticker message](https://developers.line.biz/en/reference/messaging-api/#sticker-message)\n */\nexport type StickerMessage = MessageCommon & {\n  type: \"sticker\";\n  /**\n   * Package ID for a set of stickers.\n   * For information on package IDs, see the\n   * [Sticker list](https://developers.line.biz/media/messaging-api/sticker_list.pdf).\n   */\n  packageId: string;\n  /**\n   * Sticker ID.\n   * For a list of sticker IDs for stickers that can be sent with the Messaging\n   * API, see the\n   * [Sticker list](https://developers.line.biz/media/messaging-api/sticker_list.pdf).\n   */\n  stickerId: string;\n};\n\n/**\n * @see [Imagemap message](https://developers.line.biz/en/reference/messaging-api/#imagemap-message)\n */\nexport type ImageMapMessage = MessageCommon & {\n  type: \"imagemap\";\n  /**\n   * [Base URL](https://developers.line.biz/en/reference/messaging-api/#base-url) of image\n   * (Max: 1000 characters, **HTTPS**)\n   */\n  baseUrl: string;\n  /**\n   * Alternative text (Max: 400 characters)\n   */\n  altText: string;\n  baseSize: Size;\n  /**\n   * Video to play inside a image map messages\n   */\n  video?: {\n    /**\n     * URL of video file (Max: 1000 characters)\n     *\n     * - **HTTPS**\n     * - mp4\n     * - Max: 1 minute\n     * - Max: 10 MB\n     *\n     * A very wide or tall video may be cropped when played in some environments.\n     */\n    originalContentUrl: string;\n    /**\n     * URL of preview image (Max: 1000 characters)\n     *\n     * - **HTTPS**\n     * - JPEG\n     * - Max: 240 x 240\n     * - Max: 1 MB\n     */\n    previewImageUrl: string;\n    area: Area;\n    /**\n     * External link to be displayed after a video is played\n     * This property is required if you set a video to play and a label to display after the video on the imagemap\n     */\n    externalLink?: {\n      linkUri: string;\n      label: string;\n    };\n  };\n  /**\n   * Action when tapped (Max: 50)\n   */\n  actions: ImageMapAction[];\n};\n\n/**\n * Template messages are messages with predefined layouts which you can\n * customize. For more information, see\n * [template messages](https://developers.line.biz/en/docs/messaging-api/message-types/#template-messages).\n *\n * The following template types are available:\n *\n * - [Buttons](https://developers.line.biz/en/reference/messaging-api/#buttons)\n * - [Confirm](https://developers.line.biz/en/reference/messaging-api/#confirm)\n * - [Carousel](https://developers.line.biz/en/reference/messaging-api/#carousel)\n * - [Image carousel](https://developers.line.biz/en/reference/messaging-api/#image-carousel)\n *\n * @see [Template messages](https://developers.line.biz/en/reference/messaging-api/#template-messages)\n */\nexport type TemplateMessage = MessageCommon & {\n  type: \"template\";\n  /**\n   * Alternative text (Max: 400 characters)\n   */\n  altText: string;\n  /**\n   * Carousel template content\n   */\n  template: TemplateContent;\n};\n\n/**\n * Flex Messages are messages with a customizable layout.\n * You can customize the layout freely by combining multiple elements.\n * For more information, see\n * [Using Flex Messages](https://developers.line.biz/en/docs/messaging-api/using-flex-messages/).\n *\n * @see [Flex messages](https://developers.line.biz/en/reference/messaging-api/#flex-message)\n */\nexport type FlexMessage = MessageCommon & {\n  type: \"flex\";\n  altText: string;\n  contents: FlexContainer;\n};\n\n/**\n * Object which specifies the actions and tappable regions of an imagemap.\n *\n * When a region is tapped, the user is redirected to the URI specified in\n * `uri` and the message specified in `message` is sent.\n *\n * @see [Imagemap action objects](https://developers.line.biz/en/reference/messaging-api/#imagemap-action-objects)\n */\nexport type ImageMapAction = ImageMapURIAction | ImageMapMessageAction;\n\nexport type ImageMapActionBase = {\n  /**\n   * Spoken when the accessibility feature is enabled on the client device. (Max: 50 characters)\n   * Supported on LINE 8.2.0 and later for iOS.\n   */\n  label?: string;\n  /** Defined tappable area */\n  area: Area;\n};\n\nexport type ImageMapURIAction = {\n  type: \"uri\";\n  /**\n   * Webpage URL (Max: 1000 characters)\n   */\n  linkUri: string;\n} & ImageMapActionBase;\n\nexport type ImageMapMessageAction = {\n  type: \"message\";\n  /**\n   * Message to send (Max: 400 characters)\n   */\n  text: string;\n} & ImageMapActionBase;\n\nexport type Area = {\n  /**\n   * Horizontal position relative to the top-left corner of the area\n   */\n  x: number;\n  /**\n   * Vertical position relative to the top-left corner of the area\n   */\n  y: number;\n  /**\n   * Width of the tappable area\n   */\n  width: number;\n  /**\n   * Height of the tappable area\n   */\n  height: number;\n};\n\n/**\n * A container is the top-level structure of a Flex Message. Here are the types of containers available.\n *\n * - [Bubble](https://developers.line.biz/en/reference/messaging-api/#bubble)\n * - [Carousel](https://developers.line.biz/en/reference/messaging-api/#f-carousel)\n *\n * See [Flex Message elements](https://developers.line.biz/en/docs/messaging-api/flex-message-elements/)\n * for the containers' JSON data samples and usage.\n */\nexport type FlexContainer = FlexBubble | FlexCarousel;\n\n/**\n * This is a container that contains one message bubble. It can contain four\n * blocks: header, hero, body, and footer.\n *\n * For more information about using each block, see\n * [Block](https://developers.line.biz/en/docs/messaging-api/flex-message-elements/#block).\n */\nexport type FlexBubble = {\n  type: \"bubble\";\n  size?: \"nano\" | \"micro\" | \"kilo\" | \"mega\" | \"giga\";\n  /**\n   * Text directionality and the order of components in horizontal boxes in the\n   * container. Specify one of the following values:\n   *\n   * - `ltr`: Left to right\n   * - `rtl`: Right to left\n   *\n   * The default value is `ltr`.\n   */\n  direction?: \"ltr\" | \"rtl\";\n  header?: FlexBox;\n  hero?: FlexBox | FlexImage;\n  body?: FlexBox;\n  footer?: FlexBox;\n  styles?: FlexBubbleStyle;\n  action?: Action;\n};\n\nexport type FlexBubbleStyle = {\n  header?: FlexBlockStyle;\n  hero?: FlexBlockStyle;\n  body?: FlexBlockStyle;\n  footer?: FlexBlockStyle;\n};\n\nexport type FlexBlockStyle = {\n  /**\n   * Background color of the block. Use a hexadecimal color code.\n   */\n  backgroundColor?: string;\n  /**\n   * - `true` to place a separator above the block.\n   * - `true` will be ignored for the first block in a container because you\n   *   cannot place a separator above the first block.\n   * - The default value is `false`.\n   */\n  separator?: boolean;\n  /**\n   * Color of the separator. Use a hexadecimal color code.\n   */\n  separatorColor?: string;\n};\n\nexport type FlexCarousel = {\n  type: \"carousel\";\n  /**\n   * (Max: 10 bubbles)\n   */\n  contents: FlexBubble[];\n};\n\n/**\n * Components are objects that compose a Flex Message container. Here are the\n * types of components available:\n *\n * - [Box](https://developers.line.biz/en/reference/messaging-api/#box)\n * - [Button](https://developers.line.biz/en/reference/messaging-api/#button)\n * - [Image](https://developers.line.biz/en/reference/messaging-api/#f-image)\n * - [Icon](https://developers.line.biz/en/reference/messaging-api/#icon)\n * - [Text](https://developers.line.biz/en/reference/messaging-api/#f-text)\n * - [Span](https://developers.line.biz/en/reference/messaging-api/#span)\n * - [Separator](https://developers.line.biz/en/reference/messaging-api/#separator)\n * - [Filler](https://developers.line.biz/en/reference/messaging-api/#filler)\n * - [Spacer (not recommended)](https://developers.line.biz/en/reference/messaging-api/#spacer)\n *\n * See the followings for the components' JSON data samples and usage.\n *\n * - [Flex Message elements](https://developers.line.biz/en/docs/messaging-api/flex-message-elements/)\n * - [Flex Message layout](https://developers.line.biz/en/docs/messaging-api/flex-message-layout/)\n */\nexport type FlexComponent =\n  | FlexBox\n  | FlexButton\n  | FlexImage\n  | FlexIcon\n  | FlexText\n  | FlexSpan\n  | FlexSeparator\n  | FlexFiller\n  | FlexSpacer;\n\n/**\n * This is a component that defines the layout of child components.\n * You can also include a box in a box.\n */\nexport type FlexBox = {\n  type: \"box\";\n  /**\n   * The placement style of components in this box. Specify one of the following values:\n   *\n   * - `horizontal`: Components are placed horizontally. The `direction`\n   *     property of the [bubble](https://developers.line.biz/en/reference/messaging-api/#bubble)\n   *     container specifies the order.\n   * - `vertical`: Components are placed vertically from top to bottom.\n   * - `baseline`: Components are placed in the same way as `horizontal` is\n   *     specified except the baselines of the components are aligned.\n   *\n   * For more information, see\n   * [Types of box layouts](https://developers.line.biz/en/docs/messaging-api/flex-message-layout/#box-layout-types).\n   */\n  layout: \"horizontal\" | \"vertical\" | \"baseline\";\n  /**\n   * Components in this box. Here are the types of components available:\n   *\n   * - When the `layout` property is `horizontal` or `vertical`:\n   *   + [Box](https://developers.line.biz/en/reference/messaging-api/#box)\n   *   + [button](https://developers.line.biz/en/reference/messaging-api/#button)\n   *   + [image](https://developers.line.biz/en/reference/messaging-api/#f-image)\n   *   + [text](https://developers.line.biz/en/reference/messaging-api/#f-text)\n   *   + [separator](https://developers.line.biz/en/reference/messaging-api/#separator)\n   *   + [filler](https://developers.line.biz/en/reference/messaging-api/#filler)\n   *   + [spacer (not recommended)](https://developers.line.biz/en/reference/messaging-api/#spacer)\n   * - When the `layout` property is `baseline`:\n   *   + [icon](https://developers.line.biz/en/reference/messaging-api/#icon)\n   *   + [text](https://developers.line.biz/en/reference/messaging-api/#f-text)\n   *   + [filler](https://developers.line.biz/en/reference/messaging-api/#filler)\n   *   + [spacer (not recommended)](https://developers.line.biz/en/reference/messaging-api/#spacer)\n   */\n  contents: FlexComponent[];\n  /**\n   * Background color of the block. In addition to the RGB color, an alpha\n   * channel (transparency) can also be set. Use a hexadecimal color code.\n   * (Example:#RRGGBBAA) The default value is `#00000000`.\n   */\n  backgroundColor?: string;\n  /**\n   * Color of box border. Use a hexadecimal color code.\n   */\n  borderColor?: string;\n  /**\n   * Width of box border. You can specify a value in pixels or any one of none,\n   * light, normal, medium, semi-bold, or bold. none does not render a border\n   * while the others become wider in the order of listing.\n   */\n  borderWidth?:\n    | string\n    | \"none\"\n    | \"light\"\n    | \"normal\"\n    | \"medium\"\n    | \"semi-bold\"\n    | \"bold\";\n  /**\n   * Radius at the time of rounding the corners of the border. You can specify a\n   * value in pixels or any one of `none`, `xs`, `sm`, `md`, `lg`, `xl`, or `xxl`. none does not\n   * round the corner while the others increase in radius in the order of listing. The default value is none.\n   */\n  cornerRadius?: string | \"none\" | \"xs\" | \"sm\" | \"md\" | \"lg\" | \"xl\" | \"xxl\";\n  /**\n   * Width of the box. For more information, see [Width of a box](https://developers.line.biz/en/docs/messaging-api/flex-message-layout/#box-width) in the API documentation.\n   */\n  width?: string;\n  /**\n   * Height of the box. For more information, see [Height of a box](https://developers.line.biz/en/docs/messaging-api/flex-message-layout/#box-height) in the API documentation.\n   */\n  height?: string;\n  /**\n   * The ratio of the width or height of this box within the parent box. The\n   * default value for the horizontal parent box is `1`, and the default value\n   * for the vertical parent box is `0`.\n   *\n   * For more information, see\n   * [Width and height of components](https://developers.line.biz/en/docs/messaging-api/flex-message-layout/#component-width-and-height).\n   */\n  flex?: number;\n  /**\n   * Minimum space between components in this box.\n   *\n   * - `none` does not set a space while the other values set a space whose\n   *   size increases in the order of listing.\n   * - The default value is `none`.\n   * - To override this setting for a specific component, set the `margin`\n   *   property of that component.\n   */\n  spacing?: \"none\" | \"xs\" | \"sm\" | \"md\" | \"lg\" | \"xl\" | \"xxl\";\n  /**\n   * Minimum space between this box and the previous component in the parent box.\n   *\n   * - `none` does not set a space while the other values set a space whose\n   *   size increases in the order of listing.\n   * - The default value is the value of the `spacing` property of the parent\n   *   box.\n   * - If this box is the first component in the parent box, the `margin`\n   *   property will be ignored.\n   */\n  margin?: \"none\" | \"xs\" | \"sm\" | \"md\" | \"lg\" | \"xl\" | \"xxl\";\n  /**\n   * Free space between the borders of this box and the child element.\n   * For more information, see [Box padding](https://developers.line.biz/en/docs/messaging-api/flex-message-layout/#padding-property) in the API documentation.\n   */\n  paddingAll?: string;\n  /**\n   * Free space between the border at the upper end of this box and the upper end of the child element.\n   * For more information, see [Box padding](https://developers.line.biz/en/docs/messaging-api/flex-message-layout/#padding-property) in the API documentation.\n   */\n  paddingTop?: string;\n  /**\n   * Free space between the border at the lower end of this box and the lower end of the child element.\n   * For more information, see [Box padding](https://developers.line.biz/en/docs/messaging-api/flex-message-layout/#padding-property) in the API documentation.\n   */\n  paddingBottom?: string;\n  /**\n   * Free space between the border at the left end of this box and the left end of the child element.\n   * For more information, see [Box padding](https://developers.line.biz/en/docs/messaging-api/flex-message-layout/#padding-property) in the API documentation.\n   */\n  paddingStart?: string;\n  /**\n   * Free space between the border at the right end of this box and the right end of the child element.\n   * For more information, see [Box padding](https://developers.line.biz/en/docs/messaging-api/flex-message-layout/#padding-property) in the API documentation.\n   */\n  paddingEnd?: string;\n  /**\n   * Action performed when this button is tapped.\n   *\n   * Specify an [action object](https://developers.line.biz/en/reference/messaging-api/#action-objects).\n   */\n  action?: Action;\n} & Offset;\n\nexport type Offset = {\n  /**\n   * Reference position for placing this box. Specify one of the following values:\n   * - `relative`: Use the previous box as reference.\n   * - `absolute`: Use the top left of parent element as reference.\n   *\n   * The default value is relative.\n   * For more information, see [Offset](https://developers.line.biz/en/docs/messaging-api/flex-message-layout/#component-offset) in the API documentation.\n   */\n  position?: \"relative\" | \"absolute\";\n  /**\n   * The top offset.\n   * For more information, see [Offset](https://developers.line.biz/en/docs/messaging-api/flex-message-layout/#component-offset) in the API documentation.\n   */\n  offsetTop?: string;\n  /**\n   * The bottom offset.\n   * For more information, see [Offset](https://developers.line.biz/en/docs/messaging-api/flex-message-layout/#component-offset) in the API documentation.\n   */\n  offsetBottom?: string;\n  /**\n   * The left offset.\n   * For more information, see [Offset](https://developers.line.biz/en/docs/messaging-api/flex-message-layout/#component-offset) in the API documentation.\n   */\n  offsetStart?: string;\n  /**\n   * The right offset.\n   * For more information, see [Offset](https://developers.line.biz/en/docs/messaging-api/flex-message-layout/#component-offset) in the API documentation.\n   */\n  offsetEnd?: string;\n};\n\n/**\n * This component draws a button.\n *\n * When the user taps a button, a specified action is performed.\n */\nexport type FlexButton = {\n  type: \"button\";\n  /**\n   * Action performed when this button is tapped.\n   *\n   * Specify an [action object](https://developers.line.biz/en/reference/messaging-api/#action-objects).\n   */\n  action: Action;\n  /**\n   * The ratio of the width or height of this box within the parent box.\n   *\n   * The default value for the horizontal parent box is `1`, and the default\n   * value for the vertical parent box is `0`.\n   *\n   * For more information, see\n   * [Width and height of components](https://developers.line.biz/en/docs/messaging-api/flex-message-layout/#component-width-and-height).\n   */\n  flex?: number;\n  /**\n   * Minimum space between this box and the previous component in the parent box.\n   *\n   * - `none` does not set a space while the other values set a space whose\n   *   size increases in the order of listing.\n   * - The default value is the value of the `spacing` property of the parent\n   *   box.\n   * - If this box is the first component in the parent box, the `margin`\n   *   property will be ignored.\n   */\n  margin?: \"none\" | \"xs\" | \"sm\" | \"md\" | \"lg\" | \"xl\" | \"xxl\";\n  /**\n   * Height of the button. The default value is `md`.\n   */\n  height?: \"sm\" | \"md\";\n  /**\n   * Style of the button. Specify one of the following values:\n   *\n   * - `link`: HTML link style\n   * - `primary`: Style for dark color buttons\n   * - `secondary`: Style for light color buttons\n   *\n   * The default value is `link`.\n   */\n  style?: \"link\" | \"primary\" | \"secondary\";\n  /**\n   * Use a hexadecimal color code.\n   *\n   * - Character color when the `style` property is `link`.\n   * - Background color when the `style` property is `primary` or `secondary`.\n   */\n  color?: string;\n  /**\n   * Vertical alignment style. Specify one of the following values:\n   *\n   * - `top`: Top-aligned\n   * - `bottom`: Bottom-aligned\n   * - `center`: Center-aligned\n   *\n   * The default value is `top`.\n   *\n   * If the `layout` property of the parent box is `baseline`, the `gravity`\n   * property will be ignored.\n   */\n  gravity?: \"top\" | \"bottom\" | \"center\";\n} & Offset;\n\n/**\n * This is an invisible component to fill extra space between components.\n *\n * - The filler's `flex` property is fixed to 1.\n * - The `spacing` property of the parent box will be ignored for fillers.\n */\nexport type FlexFiller = {\n  type: \"filler\";\n  /**\n   * The ratio of the width or height of this component within the parent box. For more information, see [Width and height of components](https://developers.line.biz/en/docs/messaging-api/flex-message-layout/#component-width-and-height).\n   */\n  flex?: number;\n};\n\n/**\n * This component draws an icon.\n */\nexport type FlexIcon = {\n  type: \"icon\";\n  /**\n   * Image URL\n   *\n   * Protocol: HTTPS\n   * Image format: JPEG or PNG\n   * Maximum image size: 240240 pixels\n   * Maximum data size: 1 MB\n   */\n  url: string;\n  /**\n   * Minimum space between this box and the previous component in the parent\n   * box.\n   *\n   * - `none` does not set a space while the other values set a space whose\n   *   size increases in the order of listing.\n   * - The default value is the value of the `spacing` property of the parent\n   *   box.\n   * - If this box is the first component in the parent box, the `margin`\n   *   property will be ignored.\n   */\n  margin?: \"none\" | \"xs\" | \"sm\" | \"md\" | \"lg\" | \"xl\" | \"xxl\";\n  /**\n   * Maximum size of the icon width.\n   * The size increases in the order of listing.\n   * The default value is `md`.\n   */\n  size?:\n    | \"xxs\"\n    | \"xs\"\n    | \"sm\"\n    | \"md\"\n    | \"lg\"\n    | \"xl\"\n    | \"xxl\"\n    | \"3xl\"\n    | \"4xl\"\n    | \"5xl\";\n  /**\n   * Aspect ratio of the icon. `{width}:{height}` format.\n   * The values of `{width}` and `{height}` must be in the range 1100000.\n   * `{height}` can't be more than three times the value of `{width}`.\n   * The default value is `1:1`.\n   */\n  aspectRatio?: string;\n} & Offset;\n\n/**\n * This component draws an image.\n */\nexport type FlexImage = {\n  type: \"image\";\n  /**\n   * Image URL\n   *\n   * - Protocol: HTTPS\n   * - Image format: JPEG or PNG\n   * - Maximum image size: 10241024 pixels\n   * - Maximum data size: 1 MB\n   */\n  url: string;\n  /**\n   * The ratio of the width or height of this box within the parent box.\n   *\n   * The default value for the horizontal parent box is `1`, and the default\n   * value for the vertical parent box is `0`.\n   *\n   * - For more information, see\n   * [Width and height of components](https://developers.line.biz/en/docs/messaging-api/flex-message-layout/#component-width-and-height).\n   */\n  flex?: number;\n  /**\n   * Minimum space between this box and the previous component in the parent\n   * box.\n   *\n   * - `none` does not set a space while the other values set a space whose\n   *   size increases in the order of listing.\n   * - The default value is the value of the `spacing` property of the parent\n   *   box.\n   * - If this box is the first component in the parent box, the `margin`\n   *   property will be ignored.\n   */\n  margin?: \"none\" | \"xs\" | \"sm\" | \"md\" | \"lg\" | \"xl\" | \"xxl\";\n  /**\n   * Horizontal alignment style. Specify one of the following values:\n   *\n   * - `start`: Left-aligned\n   * - `end`: Right-aligned\n   * - `center`: Center-aligned\n   *\n   * The default value is `center`.\n   */\n  align?: \"start\" | \"end\" | \"center\";\n  /**\n   * Vertical alignment style. Specify one of the following values:\n   *\n   * - `top`: Top-aligned\n   * - `bottom`: Bottom-aligned\n   * - `center`: Center-aligned\n   *\n   * The default value is `top`.\n   *\n   * If the `layout` property of the parent box is `baseline`, the `gravity` property will be ignored.\n   */\n  gravity?: \"top\" | \"bottom\" | \"center\";\n  /**\n   * Maximum size of the image width.\n   * The size increases in the order of listing.\n   * The default value is `md`.\n   */\n  size?:\n    | \"xxs\"\n    | \"xs\"\n    | \"sm\"\n    | \"md\"\n    | \"lg\"\n    | \"xl\"\n    | \"xxl\"\n    | \"3xl\"\n    | \"4xl\"\n    | \"5xl\"\n    | \"full\";\n  /**\n   * Aspect ratio of the image. `{width}:{height}` format.\n   * Specify the value of `{width}` and `{height}` in the range from 1 to 100000. However,\n   * you cannot set `{height}` to a value that is more than three times the value of `{width}`.\n   * The default value is `1:1`.\n   */\n  aspectRatio?: string;\n  /**\n   * Style of the image. Specify one of the following values:\n   *\n   * - `cover`: The image fills the entire drawing area. Parts of the image\n   *   that do not fit in the drawing area are not displayed.\n   * - `fit`: The entire image is displayed in the drawing area. The background\n   *   is displayed in the unused areas to the left and right of vertical images\n   *   and in the areas above and below horizontal images.\n   *\n   * The default value is `fit`.\n   */\n  aspectMode?: \"cover\" | \"fit\";\n  /**\n   * Background color of the image. Use a hexadecimal color code.\n   */\n  backgroundColor?: string;\n  /**\n   * Action performed when this button is tapped.\n   * Specify an [action object](https://developers.line.biz/en/reference/messaging-api/#action-objects).\n   */\n  action?: Action;\n} & Offset;\n\n/**\n * This component draws a separator between components in the parent box.\n */\nexport type FlexSeparator = {\n  type: \"separator\";\n  /**\n   * Minimum space between this box and the previous component in the parent\n   * box.\n   *\n   * - `none` does not set a space while the other values set a space whose\n   *   size increases in the order of listing.\n   * - The default value is the value of the `spacing` property of the parent\n   *   box.\n   * - If this box is the first component in the parent box, the `margin`\n   *   property will be ignored.\n   */\n  margin?: \"none\" | \"xs\" | \"sm\" | \"md\" | \"lg\" | \"xl\" | \"xxl\";\n  /**\n   * Color of the separator. Use a hexadecimal color code.\n   */\n  color?: string;\n};\n\n/**\n * This is an invisible component that places a fixed-size space at the\n * beginning or end of the box.\n */\nexport type FlexSpacer = {\n  type: \"spacer\";\n  /**\n   * Size of the space.\n   * The size increases in the order of listing.\n   * The default value is `md`.\n   */\n  size?: \"xs\" | \"sm\" | \"md\" | \"lg\" | \"xl\" | \"xxl\";\n};\n\nexport type FlexText = {\n  type: \"text\";\n  text: string;\n  /**\n   * Array of spans. Be sure to set either one of the `text` property or `contents` property. If you set the `contents` property, `text` is ignored.\n   */\n  contents?: FlexSpan[];\n  /**\n   * The ratio of the width or height of this box within the parent box.\n   *\n   * The default value for the horizontal parent box is `1`, and the default\n   * value for the vertical parent box is `0`.\n   *\n   * For more information, see\n   * [Width and height of components](https://developers.line.biz/en/docs/messaging-api/flex-message-layout/#component-width-and-height).\n   */\n  flex?: number;\n  /**\n   * Minimum space between this box and the previous component in the parent\n   * box.\n   *\n   * - `none` does not set a space while the other values set a space whose\n   *   size increases in the order of listing.\n   * - The default value is the value of the `spacing` property of the parent\n   *   box.\n   * - If this box is the first component in the parent box, the `margin`\n   *   property will be ignored.\n   */\n  margin?: \"none\" | \"xs\" | \"sm\" | \"md\" | \"lg\" | \"xl\" | \"xxl\";\n  /**\n   * Font size.\n   * The size increases in the order of listing.\n   * The default value is `md`.\n   */\n  size?:\n    | \"xxs\"\n    | \"xs\"\n    | \"sm\"\n    | \"md\"\n    | \"lg\"\n    | \"xl\"\n    | \"xxl\"\n    | \"3xl\"\n    | \"4xl\"\n    | \"5xl\";\n  /**\n   * Horizontal alignment style. Specify one of the following values:\n   *\n   * - `start`: Left-aligned\n   * - `end`: Right-aligned\n   * - `center`: Center-aligned\n   *\n   * The default value is `start`.\n   */\n  align?: \"start\" | \"end\" | \"center\";\n  /**\n   * Vertical alignment style. Specify one of the following values:\n   *\n   * - `top`: Top-aligned\n   * - `bottom`: Bottom-aligned\n   * - `center`: Center-aligned\n   *\n   * The default value is `top`.\n   *\n   * If the `layout` property of the parent box is `baseline`, the `gravity`\n   * property will be ignored.\n   */\n  gravity?: \"top\" | \"bottom\" | \"center\";\n  /**\n   * `true` to wrap text.\n   *\n   * The default value is `false`.\n   *\n   * If set to `true`, you can use a new line character (\\n) to begin on a new\n   * line.\n   */\n  wrap?: boolean;\n  /**\n   * Max number of lines. If the text does not fit in the specified number of\n   * lines, an ellipsis () is displayed at the end of the last line. If set to\n   * 0, all the text is displayed. The default value is 0.\n   */\n  maxLines?: number;\n  /**\n   * Font weight.\n   * Specifying `bold`makes the font bold.\n   * The default value is `regular`.\n   */\n  weight?: \"regular\" | \"bold\";\n  /**\n   * Font color. Use a hexadecimal color code.\n   */\n  color?: string;\n  /**\n   * Action performed when this text is tapped.\n   * Specify an [action object](https://developers.line.biz/en/reference/messaging-api/#action-objects).\n   */\n  action?: Action;\n  /**\n   * Style of the text. Specify one of the following values:\n   * - `normal`: Normal\n   * - `italic`: Italic\n   *\n   * The default value is `normal`.\n   */\n  style?: string;\n  /**\n   * Decoration of the text. Specify one of the following values:\n   * `none`: No decoration\n   * `underline`: Underline\n   * `line-through`: Strikethrough\n   *\n   * The default value is `none`.\n   */\n  decoration?: string;\n} & Offset;\n\n/**\n * This component renders multiple text strings with different designs in one row. You can specify the color, size, weight, and decoration for the font. Span is set to `contents` property in [Text](https://developers.line.biz/en/reference/messaging-api/#f-text).\n */\nexport type FlexSpan = {\n  type: \"span\";\n  /**\n   * Text. If the `wrap` property of the parent text is set to `true`, you can use a new line character (`\\n`) to begin on a new line.\n   */\n  text: string;\n  /**\n   * Font color. Use a hexadecimal color code.\n   */\n  color?: string;\n  /**\n   * Font size. You can specify one of the following values: `xxs`, `xs`, `sm`, `md`, `lg`, `xl`, `xxl`, `3xl`, `4xl`, or `5xl`. The size increases in the order of listing. The default value is `md`.\n   */\n  size?: string;\n  /**\n   * Font weight. You can specify one of the following values: `regular` or `bold`. Specifying `bold` makes the font bold. The default value is `regular`.\n   */\n  weight?: string;\n  /**\n   * Style of the text. Specify one of the following values:\n   * - `normal`: Normal\n   * - `italic`: Italic\n   *\n   * The default value is `normal`.\n   */\n  style?: string;\n  /**\n   * Decoration of the text. Specify one of the following values:\n   * `none`: No decoration\n   * `underline`: Underline\n   * `line-through`: Strikethrough\n   *\n   * The default value is `none`.\n   *\n   * Note: The decoration set in the `decoration` property of the [text](https://developers.line.biz/en/reference/messaging-api/#f-text) cannot be overwritten by the `decoration` property of the span.\n   */\n  decoration?: string;\n};\n\nexport type TemplateContent =\n  | TemplateButtons\n  | TemplateConfirm\n  | TemplateCarousel\n  | TemplateImageCarousel;\n\n/**\n * Template with an image, title, text, and multiple action buttons.\n *\n * Because of the height limitation for buttons template messages, the lower\n * part of the text display area will get cut off if the height limitation is\n * exceeded. For this reason, depending on the character width, the message\n * text may not be fully displayed even when it is within the character limits.\n */\nexport type TemplateButtons = {\n  type: \"buttons\";\n  /**\n   * Image URL (Max: 1000 characters)\n   *\n   * - HTTPS\n   * - JPEG or PNG\n   * - Max width: 1024px\n   * - Max: 1 MB\n   */\n  thumbnailImageUrl?: string;\n  /**\n   * Aspect ratio of the image. Specify one of the following values:\n   *\n   * - `rectangle`: 1.51:1\n   * - `square`: 1:1\n   *\n   * The default value is `rectangle`\n   */\n  imageAspectRatio?: \"rectangle\" | \"square\";\n  /**\n   * Size of the image. Specify one of the following values:\n   *\n   * - `cover`: The image fills the entire image area. Parts of the image that\n   *   do not fit in the area are not displayed.\n   * - `contain`: The entire image is displayed in the image area. A background\n   *   is displayed in the unused areas to the left and right of vertical images\n   *   and in the areas above and below horizontal images.\n   *\n   * The default value is `cover`.\n   */\n  imageSize?: \"cover\" | \"contain\";\n  /**\n   * Background color of image. Specify a RGB color value.\n   * The default value is `#FFFFFF` (white).\n   */\n  imageBackgroundColor?: string;\n  /**\n   * Title (Max: 40 characters)\n   */\n  title?: string;\n  /**\n   * Message text\n   *\n   * - Max: 160 characters (no image or title)\n   * - Max: 60 characters (message with an image or title)\n   */\n  text: string;\n  /**\n   * Action when tapped (Max: 4)\n   */\n  actions: Action[];\n};\n\n/**\n * Template with two action buttons.\n *\n * Because of the height limitation for confirm template messages, the lower\n * part of the `text` display area will get cut off if the height limitation is\n * exceeded. For this reason, depending on the character width, the message\n * text may not be fully displayed even when it is within the character limits.\n */\nexport type TemplateConfirm = {\n  type: \"confirm\";\n  /**\n   * Message text (Max: 240 characters)\n   */\n  text: string;\n  /**\n   * Action when tapped. Set 2 actions for the 2 buttons\n   */\n  actions: Action[];\n};\n\n/**\n * Template with multiple columns which can be cycled like a carousel.\n * The columns will be shown in order by scrolling horizontally.\n *\n * Because of the height limitation for carousel template messages, the lower\n * part of the `text` display area will get cut off if the height limitation is\n * exceeded. For this reason, depending on the character width, the message\n * text may not be fully displayed even when it is within the character limits.\n *\n * Keep the number of actions consistent for all columns. If you use an image\n * or title for a column, make sure to do the same for all other columns.\n */\nexport type TemplateCarousel = {\n  type: \"carousel\";\n  /**\n   * Array of columns (Max: 10)\n   */\n  columns: TemplateColumn[];\n  /**\n   * Aspect ratio of the image. Specify one of the following values:\n   *\n   * - `rectangle`: 1.51:1\n   * - `square`: 1:1\n   *\n   * Applies to all columns. The default value is `rectangle`.\n   */\n  imageAspectRatio?: \"rectangle\" | \"square\";\n  /**\n   * Size of the image. Specify one of the following values:\n   *\n   * - `cover`: The image fills the entire image area. Parts of the image that\n   *   do not fit in the area are not displayed.\n   * - `contain`: The entire image is displayed in the image area. A background\n   *   is displayed in the unused areas to the left and right of vertical images\n   *   and in the areas above and below horizontal images.\n   *\n   * Applies to all columns. The default value is `cover`.\n   */\n  imageSize?: \"cover\" | \"contain\";\n};\n\nexport type TemplateColumn = {\n  /**\n   * Image URL (Max: 1000 characters)\n   *\n   * - HTTPS\n   * - JPEG or PNG\n   * - Aspect ratio: 1:1.51\n   * - Max width: 1024px\n   * - Max: 1 MB\n   */\n  thumbnailImageUrl?: string;\n  /**\n   * Background color of image. Specify a RGB color value.\n   * The default value is `#FFFFFF` (white).\n   */\n  imageBackgroundColor?: string;\n  /**\n   * Title (Max: 40 characters)\n   */\n  title?: string;\n  /**\n   * Message text\n   *\n   * - Max: 120 characters (no image or title)\n   * - Max: 60 characters (message with an image or title)\n   */\n  text: string;\n  /**\n   * Action when image is tapped; set for the entire image, title, and text area\n   */\n  defaultAction?: Action;\n  /**\n   * Action when tapped (Max: 3)\n   */\n  actions: Action[];\n};\n\n/**\n * Template with multiple images which can be cycled like a carousel.\n * The images will be shown in order by scrolling horizontally.\n */\nexport type TemplateImageCarousel = {\n  type: \"image_carousel\";\n  /**\n   * Array of columns (Max: 10)\n   */\n  columns: TemplateImageColumn[];\n};\n\nexport type TemplateImageColumn = {\n  /**\n   * Image URL (Max: 1000 characters)\n   *\n   * - HTTPS\n   * - JPEG or PNG\n   * - Aspect ratio: 1:1\n   * - Max width: 1024px\n   * - Max: 1 MB\n   */\n  imageUrl: string;\n  /**\n   * Action when image is tapped\n   */\n  action: Action<{ label?: string }>;\n};\n\n/**\n * These properties are used for the quick reply.\n *\n * For more information, see\n * [Using quick replies](https://developers.line.biz/en/docs/messaging-api/using-quick-reply/).\n */\nexport type QuickReply = {\n  /**\n   * This is a container that contains\n   * [quick reply buttons](https://developers.line.biz/en/reference/messaging-api/#quick-reply-button-object).\n   *\n   * Array of objects (Max: 13)\n   */\n  items: QuickReplyItem[];\n};\n\n/**\n * This is a quick reply option that is displayed as a button.\n *\n * For more information, see\n * [quick reply buttons](https://developers.line.biz/en/reference/messaging-api/#quick-reply-button-object).\n */\nexport type QuickReplyItem = {\n  type: \"action\";\n  /**\n   * URL of the icon that is displayed at the beginning of the button (Max: 1000 characters)\n   *\n   * - URL scheme: https\n   * - Image format: PNG\n   * - Aspect ratio: 1:1\n   * - Data size: Up to 1 MB\n   *\n   * There is no limit on the image size. If the `action` property has the\n   * following actions with empty `imageUrl`:\n   *\n   * - [camera action](https://developers.line.biz/en/reference/messaging-api/#camera-action)\n   * - [camera roll action](https://developers.line.biz/en/reference/messaging-api/#camera-roll-action)\n   * - [location action](https://developers.line.biz/en/reference/messaging-api/#location-action)\n   *\n   * the default icon is displayed.\n   */\n  imageUrl?: string;\n  /**\n   * Action performed when this button is tapped.\n   *\n   * Specify an [action object](https://developers.line.biz/en/reference/messaging-api/#action-objects).\n   *\n   * The following is a list of the available actions:\n   *\n   * - [Postback action](https://developers.line.biz/en/reference/messaging-api/#postback-action)\n   * - [Message action](https://developers.line.biz/en/reference/messaging-api/#message-action)\n   * - [Datetime picker action](https://developers.line.biz/en/reference/messaging-api/#datetime-picker-action)\n   * - [Camera action](https://developers.line.biz/en/reference/messaging-api/#camera-action)\n   * - [Camera roll action](https://developers.line.biz/en/reference/messaging-api/#camera-roll-action)\n   * - [Location action](https://developers.line.biz/en/reference/messaging-api/#location-action)\n   */\n  action: Action;\n};\n\nexport type Sender = {\n  /**\n   * Display name\n   *\n   * - Max character limit: 20\n   * - Certain words such as `LINE` may not be used.\n   */\n  name?: string;\n  /**\n   * Icon image URL\n   *\n   * - Max character limit: 1000\n   * - URL scheme: https\n   */\n  iconUrl?: string;\n};\n\n/**\n * These are types of actions for your bot to take when a user taps a button or an image in a message.\n *\n * - [Postback action](https://developers.line.biz/en/reference/messaging-api/#postback-action)\n * - [Message action](https://developers.line.biz/en/reference/messaging-api/#message-action)\n * - [URI action](https://developers.line.biz/en/reference/messaging-api/#uri-action)\n * - [Datetime picker action](https://developers.line.biz/en/reference/messaging-api/#datetime-picker-action)\n * - [Camera action](https://developers.line.biz/en/reference/messaging-api/#camera-action)\n * - [Camera roll action](https://developers.line.biz/en/reference/messaging-api/#camera-roll-action)\n * - [Location action](https://developers.line.biz/en/reference/messaging-api/#location-action)\n */\nexport type Action<ExtraFields = { label: string }> = (\n  | PostbackAction\n  | MessageAction\n  | URIAction\n  | DatetimePickerAction\n  | { type: \"camera\" }\n  | { type: \"cameraRoll\" }\n  | { type: \"location\" }\n) &\n  ExtraFields;\n\n/**\n * When a control associated with this action is tapped, a postback event is\n * returned via webhook with the specified string in the data property.\n */\nexport type PostbackAction = {\n  type: \"postback\";\n  /**\n   * String returned via webhook in the `postback.data` property of the\n   * postback event (Max: 300 characters)\n   */\n  data: string;\n  /**\n   * Text displayed in the chat as a message sent by the user when the action\n   * is performed. Returned from the server through a webhook.\n   *\n   * - This property cannot be used with quick reply buttons. (Max: 300 characters)\n   * - The `displayText` and `text` properties cannot both be used at the same time.\n   * @deprecated\n   */\n  text?: string;\n  /**\n   * Text displayed in the chat as a message sent by the user when the action is performed.\n   *\n   * - Required for quick reply buttons.\n   * - Optional for the other message types.\n   *\n   * Max: 300 characters\n   *\n   * The `displayText` and `text` properties cannot both be used at the same time.\n   */\n  displayText?: string;\n};\n\n/**\n * When a control associated with this action is tapped, the string in the text\n * property is sent as a message from the user.\n */\nexport type MessageAction = {\n  type: \"message\";\n  /**\n   * Text sent when the action is performed (Max: 300 characters)\n   */\n  text: string;\n};\n\n/**\n * When a control associated with this action is tapped, the URI specified in\n * the `uri` property is opened.\n */\nexport type URIAction = {\n  type: \"uri\";\n  /**\n   * URI opened when the action is performed (Max: 1000 characters).\n   * Must start with `http`, `https`, or `tel`.\n   */\n  uri: string;\n  altUri?: AltURI;\n};\n\n/**\n * URI opened on LINE for macOS and Windows when the action is performed (Max: 1000 characters)\n * If the altUri.desktop property is set, the uri property is ignored on LINE for macOS and Windows.\n * The available schemes are http, https, line, and tel.\n * For more information about the LINE URL scheme, see Using the LINE URL scheme.\n * This property is supported on the following version of LINE.\n *\n * LINE 5.12.0 or later for macOS and Windows\n * Note: The altUri.desktop property is supported only when you set URI actions in Flex Messages.\n */\nexport type AltURI = {\n  desktop: string;\n};\n\n/**\n * When a control associated with this action is tapped, a\n * [postback event](https://developers.line.biz/en/reference/messaging-api/#postback-event)\n * is returned via webhook with the date and time selected by the user from the\n * date and time selection dialog.\n *\n * The datetime picker action does not support time zones.\n *\n * #### Date and time format\n *\n * The date and time formats for the `initial`, `max`, and `min` values are\n * shown below. The `full-date`, `time-hour`, and `time-minute` formats follow\n * the [RFC3339](https://www.ietf.org/rfc/rfc3339.txt) protocol.\n *\n * | Mode     | Format                                                       | Example                          |\n * | -------- | ------------------------------------------------------------ | -------------------------------- |\n * | date     | `full-date` (Max: 2100-12-31; Min: 1900-01-01)               | 2017-06-18                       |\n * | time     | `time-hour`:`time-minute` (Max: 23:59; Min: 00:00)           | 00:0006:1523:59                  |\n * | datetime | `full-date`T`time-hour`:`time-minute` or `full-date`t`time-hour`:`time-minute` (Max: 2100-12-31T23:59; Min: 1900-01-01T00:00) | 2017-06-18T06:152017-06-18t06:15 |\n */\nexport type DatetimePickerAction = {\n  type: \"datetimepicker\";\n  /**\n   * String returned via webhook in the `postback.data` property of the\n   * postback event (Max: 300 characters)\n   */\n  data: string;\n  mode: \"date\" | \"time\" | \"datetime\";\n  /**\n   * Initial value of date or time\n   */\n  initial?: string;\n  /**\n   * Largest date or time value that can be selected. Must be greater than the\n   * `min` value.\n   */\n  max?: string;\n  /**\n   * Smallest date or time value that can be selected. Must be less than the\n   * `max` value.\n   */\n  min?: string;\n};\n\nexport type Size = {\n  width: number;\n  height: number;\n};\n\n/**\n * Rich menus consist of either of these objects.\n *\n * - [Rich menu object](https://developers.line.biz/en/reference/messaging-api/#rich-menu-object)\n *   without the rich menu ID. Use this object when you\n *   [create a rich menu](https://developers.line.biz/en/reference/messaging-api/#create-rich-menu).\n * - [Rich menu response object](https://developers.line.biz/en/reference/messaging-api/#rich-menu-response-object)\n *   with the rich menu ID. This object is returned when you\n *   [get a rich menu](https://developers.line.biz/en/reference/messaging-api/#get-rich-menu)\n *   or [get a list of rich menus](https://developers.line.biz/en/reference/messaging-api/#get-rich-menu-list).\n *\n * [Area objects](https://developers.line.biz/en/reference/messaging-api/#area-object) and\n * [action objects](https://developers.line.biz/en/reference/messaging-api/#action-objects)\n * are included in these objects.\n */\nexport type RichMenu = {\n  /**\n   * [`size` object](https://developers.line.biz/en/reference/messaging-api/#size-object)\n   * which contains the width and height of the rich menu displayed in the chat.\n   * Rich menu images must be one of the following sizes: 2500x1686px or 2500x843px.\n   */\n  size: Size;\n  /**\n   * `true` to display the rich menu by default. Otherwise, `false`.\n   */\n  selected: boolean;\n  /**\n   * Name of the rich menu.\n   *\n   * This value can be used to help manage your rich menus and is not displayed\n   * to users.\n   *\n   * (Max: 300 characters)\n   */\n  name: string;\n  /**\n   * Text displayed in the chat bar (Max: 14 characters)\n   */\n  chatBarText: string;\n  /**\n   * Array of [area objects](https://developers.line.biz/en/reference/messaging-api/#area-object)\n   * which define the coordinates and size of tappable areas\n   * (Max: 20 area objects)\n   */\n  areas: Array<{ bounds: Area; action: Action<{}> }>;\n};\n\nexport type RichMenuResponse = { richMenuId: string } & RichMenu;\n\nexport type NumberOfMessagesSentResponse = InsightStatisticsResponse & {\n  /**\n   * The number of messages sent with the Messaging API on the date specified in date.\n   * The response has this property only when the value of status is `ready`.\n   */\n  success?: number;\n};\n\nexport type TargetLimitForAdditionalMessages = {\n  /**\n   * One of the following values to indicate whether a target limit is set or not.\n   *  - `none`: This indicates that a target limit is not set.\n   *  - `limited`: This indicates that a target limit is set.\n   */\n  type: \"none\" | \"limited\";\n  /**\n   * The target limit for additional messages in the current month.\n   * This property is returned when the `type` property has a value of `limited`.\n   */\n  value?: number;\n};\n\nexport type NumberOfMessagesSentThisMonth = {\n  /**\n   * The number of sent messages in the current month\n   */\n  totalUsage: number;\n};\n\nexport const LINE_REQUEST_ID_HTTP_HEADER_NAME = \"x-line-request-id\";\nexport type MessageAPIResponseBase = {\n  [LINE_REQUEST_ID_HTTP_HEADER_NAME]?: string;\n};\n\nexport const LINE_SIGNATURE_HTTP_HEADER_NAME = \"x-line-signature\";\n\nexport type InsightStatisticsResponse = {\n  /**\n   * Calculation status. One of:\n   * - `ready`: Calculation has finished; the numbers are up-to-date.\n   * - `unready`: We haven't finished calculating the number of sent messages for the specified `date`. Calculation usually takes about a day. Please try again later.\n   * - `out_of_service`: The specified `date` is earlier than the date on which we first started calculating sent messages. Different APIs have different date. Check them at the [document](https://developers.line.biz/en/reference/messaging-api/).\n   */\n  status: \"ready\" | \"unready\" | \"out_of_service\";\n};\n\nexport type NumberOfMessageDeliveries = InsightStatisticsResponse & {\n  /**\n   * Number of push messages sent to **all** of this LINE official account's friends (broadcast messages).\n   */\n  broadcast: number;\n  /**\n   * Number of push messages sent to **some** of this LINE official account's friends, based on specific attributes (targeted/segmented messages).\n   */\n  targeting: number;\n  /**\n   * Number of auto-response messages sent.\n   */\n  autoResponse: number;\n  /**\n   * Number of greeting messages sent.\n   */\n  welcomeResponse: number;\n  /**\n   * Number of messages sent from LINE Official Account Manager [Chat screen](https://www.linebiz.com/jp-en/manual/OfficialAccountManager/chats/screens/).\n   */\n  chat: number;\n  /**\n   * Number of broadcast messages sent with the [Send broadcast message](https://developers.line.biz/en/reference/messaging-api/#send-broadcast-message) Messaging API operation.\n   */\n  apiBroadcast: number;\n  /**\n   * Number of push messages sent with the [Send push message](https://developers.line.biz/en/reference/messaging-api/#send-push-message) Messaging API operation.\n   */\n  apiPush: number;\n  /**\n   * Number of multicast messages sent with the [Send multicast message](https://developers.line.biz/en/reference/messaging-api/#send-multicast-message) Messaging API operation.\n   */\n  apiMulticast: number;\n  /**\n   * Number of replies sent with the [Send reply message](https://developers.line.biz/en/reference/messaging-api/#send-reply-message) Messaging API operation.\n   */\n  apiReply: number;\n};\n\nexport type NumberOfFollowers = InsightStatisticsResponse & {\n  /**\n   * The number of times, as of the specified `date`, that a user added this LINE official account as a friend. The number doesn't decrease when a user blocks the account after adding it, or when they delete their own account.\n   */\n  followers: Number;\n  /**\n   * The number of users, as of the specified `date`, that the official account can reach with messages targeted by gender, age, or area. This number includes users for whom we estimated demographic attributes based on their activity in LINE and LINE-connected services.\n   */\n  targetedReaches: Number;\n  /**\n   * The number of users blocking the account as of the specified `date`. The number decreases when a user unblocks the account.\n   */\n  blocks: Number;\n};\n\nexport type NumberOfMessageDeliveriesResponse =\n  | InsightStatisticsResponse\n  | NumberOfMessageDeliveries;\n\nexport type NumberOfFollowersResponse =\n  | InsightStatisticsResponse\n  | NumberOfFollowers;\n\ntype PercentageAble = {\n  percentage: number;\n};\n\nexport type FriendDemographics = {\n  /**\n   * `true` if friend demographic information is available.\n   */\n  available: boolean;\n  /**\n   * Percentage per gender\n   */\n  genders?: Array<\n    {\n      /**\n       * Gender\n       */\n      gender: \"unknown\" | \"male\" | \"female\";\n    } & PercentageAble\n  >;\n  /**\n   * Percentage per age group\n   */\n  ages?: Array<\n    {\n      /**\n       * Age group\n       */\n      age: string;\n    } & PercentageAble\n  >;\n  /**\n   * Percentage per area\n   */\n  areas?: Array<\n    {\n      area: string;\n    } & PercentageAble\n  >;\n  /**\n   * Percentage by OS\n   */\n  appTypes?: Array<\n    {\n      appType: \"ios\" | \"android\" | \"others\";\n    } & PercentageAble\n  >;\n  /**\n   * Percentage per friendship duration\n   */\n  subscriptionPeriods?: Array<\n    {\n      /**\n       * Friendship duration\n       */\n      subscriptionPeriod:\n        | \"over365days\"\n        | \"within365days\"\n        | \"within180days\"\n        | \"within90days\"\n        | \"within30days\"\n        | \"within7days\"\n        // in case for some rare cases(almost no)\n        | \"unknown\";\n    } & PercentageAble\n  >;\n};\n\ntype UserInteractionStatisticsOfEachMessage = {\n  seq: number;\n  impression: number;\n  mediaPlayed: number;\n  mediaPlayed25Percent: number;\n  mediaPlayed50Percent: number;\n  mediaPlayed75Percent: number;\n  mediaPlayed100Percent: number;\n  uniqueMediaPlayed: number;\n  uniqueMediaPlayed25Percent: number;\n  uniqueMediaPlayed50Percent: number;\n  uniqueMediaPlayed75Percent: number;\n  uniqueMediaPlayed100Percent: number;\n};\n\ntype UserInteractionStatisticsOfEachURL = {\n  seq: number;\n  url: number;\n  click: number;\n  uniqueClick: number;\n  uniqueClickOfRequest: number;\n};\n\n/**\n * https://developers.line.biz/en/reference/messaging-api/#get-message-event\n */\nexport type UserInteractionStatistics = {\n  overview: {\n    requestId: string;\n    timestamp: number;\n    delivered: number;\n    uniqueImpression: number;\n    uniqueClick: number;\n    uniqueMediaPlayed: number;\n    uniqueMediaPlayed100Percent: number;\n  };\n  messages: UserInteractionStatisticsOfEachMessage[];\n  clicks: UserInteractionStatisticsOfEachURL[];\n};\n\ntype FilterOperatorObject<T> = {\n  type: \"operator\";\n} & (\n  | {\n      and: (T | FilterOperatorObject<T>)[];\n    }\n  | {\n      or: (T | FilterOperatorObject<T>)[];\n    }\n  | {\n      not: T | (T | FilterOperatorObject<T>)[];\n    }\n);\n\ntype AudienceObject = {\n  type: \"audience\";\n  audienceGroupId: number;\n};\n\nexport type ReceieptObject =\n  | AudienceObject\n  | FilterOperatorObject<AudienceObject>;\n\ntype DemographicAge =\n  | \"age_15\"\n  | \"age_20\"\n  | \"age_25\"\n  | \"age_30\"\n  | \"age_35\"\n  | \"age_40\"\n  | \"age_45\"\n  | \"age_50\";\n\ntype DemographicSubscriptionPeriod =\n  | \"day_7\"\n  | \"day_30\"\n  | \"day_90\"\n  | \"day_180\"\n  | \"day_365\";\n\ntype DemographicArea =\n  | \"jp_01\"\n  | \"jp_02\"\n  | \"jp_03\"\n  | \"jp_04\"\n  | \"jp_05\"\n  | \"jp_06\"\n  | \"jp_07\"\n  | \"jp_08\"\n  | \"jp_09\"\n  | \"jp_10\"\n  | \"jp_11\"\n  | \"jp_12\"\n  | \"jp_13\"\n  | \"jp_14\"\n  | \"jp_15\"\n  | \"jp_16\"\n  | \"jp_17\"\n  | \"jp_18\"\n  | \"jp_19\"\n  | \"jp_20\"\n  | \"jp_21\"\n  | \"jp_22\"\n  | \"jp_23\"\n  | \"jp_24\"\n  | \"jp_25\"\n  | \"jp_26\"\n  | \"jp_27\"\n  | \"jp_28\"\n  | \"jp_29\"\n  | \"jp_30\"\n  | \"jp_31\"\n  | \"jp_32\"\n  | \"jp_33\"\n  | \"jp_34\"\n  | \"jp_35\"\n  | \"jp_36\"\n  | \"jp_37\"\n  | \"jp_38\"\n  | \"jp_39\"\n  | \"jp_40\"\n  | \"jp_41\"\n  | \"jp_42\"\n  | \"jp_43\"\n  | \"jp_44\"\n  | \"jp_45\"\n  | \"jp_46\"\n  | \"jp_47\"\n  | \"tw_01\"\n  | \"tw_02\"\n  | \"tw_03\"\n  | \"tw_04\"\n  | \"tw_05\"\n  | \"tw_06\"\n  | \"tw_07\"\n  | \"tw_08\"\n  | \"tw_09\"\n  | \"tw_10\"\n  | \"tw_11\"\n  | \"tw_12\"\n  | \"tw_13\"\n  | \"tw_14\"\n  | \"tw_15\"\n  | \"tw_16\"\n  | \"tw_17\"\n  | \"tw_18\"\n  | \"tw_19\"\n  | \"tw_20\"\n  | \"tw_21\"\n  | \"tw_22\"\n  | \"th_01\"\n  | \"th_02\"\n  | \"th_03\"\n  | \"th_04\"\n  | \"th_05\"\n  | \"th_06\"\n  | \"th_07\"\n  | \"th_08\"\n  | \"id_01\"\n  | \"id_02\"\n  | \"id_03\"\n  | \"id_04\"\n  | \"id_06\"\n  | \"id_07\"\n  | \"id_08\"\n  | \"id_09\"\n  | \"id_10\"\n  | \"id_11\"\n  | \"id_12\"\n  | \"id_05\";\n\ntype DemographicObject =\n  | {\n      type: \"gender\";\n      oneOf: (\"male\" | \"female\")[];\n    }\n  | {\n      type: \"age\";\n      gte?: DemographicAge;\n      lt?: DemographicAge;\n    }\n  | {\n      type: \"appType\";\n      oneOf: (\"ios\" | \"android\")[];\n    }\n  | {\n      type: \"area\";\n      oneOf: DemographicArea[];\n    }\n  | {\n      type: \"subscriptionPeriod\";\n      gte?: DemographicSubscriptionPeriod;\n      lt?: DemographicSubscriptionPeriod;\n    };\n\nexport type DemographicFilterObject =\n  | DemographicObject\n  | FilterOperatorObject<DemographicObject>;\n\nexport type NarrowcastProgressResponse = (\n  | {\n      phase: \"waiting\";\n    }\n  | ((\n      | {\n          phase: \"sending\" | \"succeeded\";\n        }\n      | {\n          phase: \"failed\";\n          failedDescription: string;\n        }\n    ) & {\n      successCount: number;\n      failureCount: number;\n      targetCount: string;\n    })\n) & {\n  errorCode?: 1 | 2;\n};\n\ntype AudienceGroupJob = {\n  audienceGroupJobId: number;\n  audienceGroupId: number;\n  description: string;\n  type: \"DIFF_ADD\";\n  audienceCount: number;\n  created: number;\n} & (\n  | {\n      jobStatus: \"QUEUED\" | \"WORKING\" | \"FINISHED\";\n    }\n  | {\n      jobStatus: \"FAILED\";\n      failedType: \"INTERNAL_ERROR\";\n    }\n);\n\nexport type AudienceGroupStatus =\n  | \"IN_PROGRESS\"\n  | \"READY\"\n  | \"EXPIRED\"\n  | \"FAILED\";\n\nexport type AudienceGroupCreateRoute = \"OA_MANAGER\" | \"MESSAGING_API\";\n\ntype _AudienceGroup = {\n  audienceGroupId: number;\n  description: string;\n  audienceCount: number;\n  created: number;\n  isIfaAudience: boolean;\n  permission: \"READ\" | \"READ_WRITE\";\n  createRoute: AudienceGroupCreateRoute;\n} & (\n  | {\n      status: Exclude<AudienceGroupStatus, \"FAILED\">;\n    }\n  | {\n      status: \"FAILED\";\n      failedType: \"AUDIENCE_GROUP_AUDIENCE_INSUFFICIENT\" | \"INTERNAL_ERROR\";\n    }\n) &\n  (\n    | {\n        type: \"UPLOAD\";\n      }\n    | {\n        type: \"CLICK\";\n        clickUrl: string;\n      }\n    | {\n        type: \"IMP\";\n        requestId: string;\n      }\n  );\n\nexport type AudienceGroup = _AudienceGroup & {\n  jobs: AudienceGroupJob[];\n};\n\nexport type AudienceGroups = _AudienceGroup[];\n\nexport type AudienceGroupAuthorityLevel = \"PUBLIC\" | \"PRIVATE\";\n\nexport type ChannelAccessToken = {\n  access_token: string;\n  expires_in: number;\n  token_type: \"Bearer\";\n  key_id?: string;\n};\n\n/**\n * Response body of get group summary.\n *\n * @see [Get group summary](https://developers.line.biz/ja/reference/messaging-api/#get-group-summary)\n */\nexport type GroupSummaryResponse = {\n  groupId: string;\n  groupName: string;\n  pictureUrl: string;\n};\n\n/**\n * Response body of get members in group count and get members in room count.\n *\n * @see [Get members in group count](https://developers.line.biz/en/reference/messaging-api/#get-members-group-count)\n * @see [Get members in room count](https://developers.line.biz/en/reference/messaging-api/#get-members-room-count)\n */\nexport type MembersCountResponse = {\n  count: number;\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c48786cb688ab44037b012535c455089bd41a426","contentHash":"6cad4b9a34f98f20ad9fbc658837c98d73b9cbbbaef40670fde80d1accb1d83f"},"/Users/somkheart/Documents/lprlinebot/lib/utils.ts":{"path":"/Users/somkheart/Documents/lprlinebot/lib/utils.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":46}},"2":{"start":{"line":4,"column":21},"end":{"line":4,"column":44}},"3":{"start":{"line":6,"column":4},"end":{"line":6,"column":59}},"4":{"start":{"line":8,"column":0},"end":{"line":8,"column":26}},"5":{"start":{"line":10,"column":4},"end":{"line":15,"column":5}},"6":{"start":{"line":11,"column":8},"end":{"line":11,"column":19}},"7":{"start":{"line":14,"column":8},"end":{"line":14,"column":92}},"8":{"start":{"line":17,"column":0},"end":{"line":17,"column":32}}},"fnMap":{"0":{"name":"toArray","decl":{"start":{"line":5,"column":9},"end":{"line":5,"column":16}},"loc":{"start":{"line":5,"column":27},"end":{"line":7,"column":1}},"line":5},"1":{"name":"ensureJSON","decl":{"start":{"line":9,"column":9},"end":{"line":9,"column":19}},"loc":{"start":{"line":9,"column":25},"end":{"line":16,"column":1}},"line":9}},"branchMap":{"0":{"loc":{"start":{"line":6,"column":11},"end":{"line":6,"column":58}},"type":"cond-expr","locations":[{"start":{"line":6,"column":37},"end":{"line":6,"column":45}},{"start":{"line":6,"column":48},"end":{"line":6,"column":58}}],"line":6},"1":{"loc":{"start":{"line":10,"column":4},"end":{"line":15,"column":5}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":15,"column":5}},{"start":{"line":10,"column":4},"end":{"line":15,"column":5}}],"line":10}},"s":{"0":1,"1":1,"2":1,"3":7,"4":1,"5":40,"6":39,"7":1,"8":1},"f":{"0":7,"1":40},"b":{"0":[3,4],"1":[39,1]},"inputSourceMap":{"version":3,"file":"/Users/somkheart/Documents/lprlinebot/lib/utils.ts","sources":["/Users/somkheart/Documents/lprlinebot/lib/utils.ts"],"names":[],"mappings":";;;AAAA,6CAA8C;AAE9C,SAAgB,OAAO,CAAI,QAAiB;IAC1C,OAAO,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC;AACzD,CAAC;AAFD,0BAEC;AAED,SAAgB,UAAU,CAAI,GAAM;IAClC,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;QAC3B,OAAO,GAAG,CAAC;KACZ;SAAM;QACL,MAAM,IAAI,2BAAc,CAAC,uCAAuC,EAAE,GAAG,CAAC,CAAC;KACxE;AACH,CAAC;AAND,gCAMC","sourcesContent":["import { JSONParseError } from \"./exceptions\";\n\nexport function toArray<T>(maybeArr: T | T[]): T[] {\n  return Array.isArray(maybeArr) ? maybeArr : [maybeArr];\n}\n\nexport function ensureJSON<T>(raw: T): T {\n  if (typeof raw === \"object\") {\n    return raw;\n  } else {\n    throw new JSONParseError(\"Failed to parse response body as JSON\", raw);\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"662d54f69775257eb401279bfea9457407f23993","contentHash":"545c4fc211d9b0e39c38bef03d60d36a47b3e0f15d4275941917ae622248ec7f"},"/Users/somkheart/Documents/lprlinebot/lib/endpoints.ts":{"path":"/Users/somkheart/Documents/lprlinebot/lib/endpoints.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":125}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":60}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":60}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":59}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":67}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/Users/somkheart/Documents/lprlinebot/lib/endpoints.ts","sources":["/Users/somkheart/Documents/lprlinebot/lib/endpoints.ts"],"names":[],"mappings":";;;AAAa,QAAA,oBAAoB,GAAG,4BAA4B,CAAC;AACpD,QAAA,eAAe,GAAG,iCAAiC,CAAC;AACpD,QAAA,iBAAiB,GAAG,8BAA8B,CAAC;AACnD,QAAA,sBAAsB,GAAG,iCAAiC,CAAC","sourcesContent":["export const MESSAGING_API_PREFIX = `https://api.line.me/v2/bot`;\nexport const DATA_API_PREFIX = `https://api-data.line.me/v2/bot`;\nexport const OAUTH_BASE_PREFIX = `https://api.line.me/v2/oauth`;\nexport const OAUTH_BASE_PREFIX_V2_1 = `https://api.line.me/oauth2/v2.1`;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a5b591e7b44a000f0504f90fcfdf692b12b2e7b7","contentHash":"15b319e243218619aea0c876e3ea3c8273b3433994702a4da4b6449c819eb8b1"},"/Users/somkheart/Documents/lprlinebot/lib/middleware.ts":{"path":"/Users/somkheart/Documents/lprlinebot/lib/middleware.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":22},"end":{"line":3,"column":44}},"2":{"start":{"line":4,"column":21},"end":{"line":4,"column":44}},"3":{"start":{"line":5,"column":14},"end":{"line":5,"column":32}},"4":{"start":{"line":6,"column":29},"end":{"line":6,"column":60}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":71}},"6":{"start":{"line":11,"column":4},"end":{"line":13,"column":5}},"7":{"start":{"line":12,"column":8},"end":{"line":12,"column":45}},"8":{"start":{"line":14,"column":19},"end":{"line":14,"column":39}},"9":{"start":{"line":15,"column":24},"end":{"line":48,"column":5}},"10":{"start":{"line":18,"column":26},"end":{"line":18,"column":76}},"11":{"start":{"line":19,"column":8},"end":{"line":22,"column":9}},"12":{"start":{"line":20,"column":12},"end":{"line":20,"column":77}},"13":{"start":{"line":21,"column":12},"end":{"line":21,"column":19}},"14":{"start":{"line":23,"column":21},"end":{"line":35,"column":12}},"15":{"start":{"line":24,"column":12},"end":{"line":34,"column":13}},"16":{"start":{"line":26,"column":16},"end":{"line":26,"column":35}},"17":{"start":{"line":28,"column":17},"end":{"line":34,"column":13}},"18":{"start":{"line":29,"column":16},"end":{"line":29,"column":32}},"19":{"start":{"line":33,"column":16},"end":{"line":33,"column":156}},"20":{"start":{"line":33,"column":56},"end":{"line":33,"column":154}},"21":{"start":{"line":33,"column":112},"end":{"line":33,"column":153}},"22":{"start":{"line":36,"column":8},"end":{"line":39,"column":9}},"23":{"start":{"line":37,"column":12},"end":{"line":37,"column":103}},"24":{"start":{"line":38,"column":12},"end":{"line":38,"column":19}},"25":{"start":{"line":40,"column":24},"end":{"line":40,"column":70}},"26":{"start":{"line":41,"column":8},"end":{"line":47,"column":9}},"27":{"start":{"line":42,"column":12},"end":{"line":42,"column":43}},"28":{"start":{"line":43,"column":12},"end":{"line":43,"column":19}},"29":{"start":{"line":46,"column":12},"end":{"line":46,"column":72}},"30":{"start":{"line":49,"column":4},"end":{"line":51,"column":6}},"31":{"start":{"line":50,"column":8},"end":{"line":50,"column":48}},"32":{"start":{"line":53,"column":0},"end":{"line":53,"column":29}}},"fnMap":{"0":{"name":"isValidBody","decl":{"start":{"line":7,"column":9},"end":{"line":7,"column":20}},"loc":{"start":{"line":7,"column":27},"end":{"line":9,"column":1}},"line":7},"1":{"name":"middleware","decl":{"start":{"line":10,"column":9},"end":{"line":10,"column":19}},"loc":{"start":{"line":10,"column":28},"end":{"line":52,"column":1}},"line":10},"2":{"name":"(anonymous_2)","decl":{"start":{"line":15,"column":24},"end":{"line":15,"column":25}},"loc":{"start":{"line":15,"column":50},"end":{"line":48,"column":5}},"line":15},"3":{"name":"(anonymous_3)","decl":{"start":{"line":23,"column":28},"end":{"line":23,"column":29}},"loc":{"start":{"line":23,"column":40},"end":{"line":35,"column":9}},"line":23},"4":{"name":"(anonymous_4)","decl":{"start":{"line":33,"column":35},"end":{"line":33,"column":36}},"loc":{"start":{"line":33,"column":56},"end":{"line":33,"column":154}},"line":33},"5":{"name":"(anonymous_5)","decl":{"start":{"line":33,"column":101},"end":{"line":33,"column":102}},"loc":{"start":{"line":33,"column":112},"end":{"line":33,"column":153}},"line":33},"6":{"name":"(anonymous_6)","decl":{"start":{"line":49,"column":11},"end":{"line":49,"column":12}},"loc":{"start":{"line":49,"column":31},"end":{"line":51,"column":5}},"line":49}},"branchMap":{"0":{"loc":{"start":{"line":8,"column":11},"end":{"line":8,"column":70}},"type":"binary-expr","locations":[{"start":{"line":8,"column":12},"end":{"line":8,"column":16}},{"start":{"line":8,"column":20},"end":{"line":8,"column":44}},{"start":{"line":8,"column":49},"end":{"line":8,"column":70}}],"line":8},"1":{"loc":{"start":{"line":11,"column":4},"end":{"line":13,"column":5}},"type":"if","locations":[{"start":{"line":11,"column":4},"end":{"line":13,"column":5}},{"start":{"line":11,"column":4},"end":{"line":13,"column":5}}],"line":11},"2":{"loc":{"start":{"line":19,"column":8},"end":{"line":22,"column":9}},"type":"if","locations":[{"start":{"line":19,"column":8},"end":{"line":22,"column":9}},{"start":{"line":19,"column":8},"end":{"line":22,"column":9}}],"line":19},"3":{"loc":{"start":{"line":24,"column":12},"end":{"line":34,"column":13}},"type":"if","locations":[{"start":{"line":24,"column":12},"end":{"line":34,"column":13}},{"start":{"line":24,"column":12},"end":{"line":34,"column":13}}],"line":24},"4":{"loc":{"start":{"line":28,"column":17},"end":{"line":34,"column":13}},"type":"if","locations":[{"start":{"line":28,"column":17},"end":{"line":34,"column":13}},{"start":{"line":28,"column":17},"end":{"line":34,"column":13}}],"line":28},"5":{"loc":{"start":{"line":33,"column":112},"end":{"line":33,"column":153}},"type":"cond-expr","locations":[{"start":{"line":33,"column":120},"end":{"line":33,"column":133}},{"start":{"line":33,"column":136},"end":{"line":33,"column":153}}],"line":33},"6":{"loc":{"start":{"line":36,"column":8},"end":{"line":39,"column":9}},"type":"if","locations":[{"start":{"line":36,"column":8},"end":{"line":39,"column":9}},{"start":{"line":36,"column":8},"end":{"line":39,"column":9}}],"line":36},"7":{"loc":{"start":{"line":40,"column":24},"end":{"line":40,"column":70}},"type":"cond-expr","locations":[{"start":{"line":40,"column":48},"end":{"line":40,"column":63}},{"start":{"line":40,"column":66},"end":{"line":40,"column":70}}],"line":40}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":17,"6":2,"7":1,"8":1,"9":1,"10":10,"11":10,"12":1,"13":1,"14":9,"15":9,"16":1,"17":8,"18":2,"19":6,"20":6,"21":6,"22":8,"23":2,"24":2,"25":5,"26":5,"27":5,"28":4,"29":1,"30":1,"31":10,"32":1},"f":{"0":17,"1":2,"2":10,"3":9,"4":6,"5":6,"6":10},"b":{"0":[17,4,16],"1":[1,1],"2":[1,9],"3":[1,8],"4":[2,6],"5":[1,5],"6":[2,5],"7":[4,1]},"inputSourceMap":{"version":3,"file":"/Users/somkheart/Documents/lprlinebot/lib/middleware.ts","sources":["/Users/somkheart/Documents/lprlinebot/lib/middleware.ts"],"names":[],"mappings":";;AAAA,6CAAkC;AAElC,6CAAyE;AACzE,iCAAiC;AACjC,6DAAqD;AAYrD,SAAS,WAAW,CAAC,IAAU;IAC7B,OAAO,CAAC,IAAI,IAAI,OAAO,IAAI,KAAK,QAAQ,CAAC,IAAI,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;AACrE,CAAC;AAED,SAAwB,UAAU,CAAC,MAA8B;IAC/D,IAAI,CAAC,MAAM,CAAC,aAAa,EAAE;QACzB,MAAM,IAAI,KAAK,CAAC,mBAAmB,CAAC,CAAC;KACtC;IAED,MAAM,MAAM,GAAG,MAAM,CAAC,aAAa,CAAC;IAEpC,MAAM,WAAW,GAAe,KAAK,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE;QACvD,+BAA+B;QAC/B,wDAAwD;QACxD,MAAM,SAAS,GAAG,GAAG,CAAC,OAAO,CAC3B,KAAK,CAAC,+BAA+B,CAC5B,CAAC;QAEZ,IAAI,CAAC,SAAS,EAAE;YACd,IAAI,CAAC,IAAI,sCAAyB,CAAC,cAAc,CAAC,CAAC,CAAC;YACpD,OAAO;SACR;QAED,MAAM,IAAI,GAAG,MAAM,CAAC,KAAK,IAA8B,EAAE;YACvD,IAAI,WAAW,CAAE,GAAW,CAAC,OAAO,CAAC,EAAE;gBACrC,2DAA2D;gBAC3D,OAAQ,GAAW,CAAC,OAAO,CAAC;aAC7B;iBAAM,IAAI,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;gBAChC,OAAO,GAAG,CAAC,IAAI,CAAC;aACjB;iBAAM;gBACL,mDAAmD;gBACnD,OAAO,IAAI,OAAO,CAAS,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE,CAC7C,iBAAG,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,CAAC,GAAU,EAAE,GAAU,EAAE,CAAC,KAAY,EAAE,EAAE,CAC5D,KAAK,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAC1C,CACF,CAAC;aACH;QACH,CAAC,CAAC,EAAE,CAAC;QAEL,IAAI,CAAC,4BAAiB,CAAC,IAAI,EAAE,MAAM,EAAE,SAAS,CAAC,EAAE;YAC/C,IAAI,CACF,IAAI,sCAAyB,CAAC,6BAA6B,EAAE,SAAS,CAAC,CACxE,CAAC;YACF,OAAO;SACR;QAED,MAAM,OAAO,GAAG,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC;QAE/D,IAAI;YACF,GAAG,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;YAC/B,IAAI,EAAE,CAAC;SACR;QAAC,OAAO,GAAG,EAAE;YACZ,IAAI,CAAC,IAAI,2BAAc,CAAC,GAAG,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC,CAAC;SAChD;IACH,CAAC,CAAC;IACF,OAAO,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,EAAQ,EAAE;QACd,WAAW,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,CAAE,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;IAC3D,CAAC,CAAC;AACJ,CAAC;AAtDD,6BAsDC","sourcesContent":["import { raw } from \"body-parser\";\nimport * as http from \"http\";\nimport { JSONParseError, SignatureValidationFailed } from \"./exceptions\";\nimport * as Types from \"./types\";\nimport validateSignature from \"./validate-signature\";\n\nexport type Request = http.IncomingMessage & { body: any };\nexport type Response = http.ServerResponse;\nexport type NextCallback = (err?: Error) => void;\n\nexport type Middleware = (\n  req: Request,\n  res: Response,\n  next: NextCallback,\n) => void | Promise<void>;\n\nfunction isValidBody(body?: any): body is string | Buffer {\n  return (body && typeof body === \"string\") || Buffer.isBuffer(body);\n}\n\nexport default function middleware(config: Types.MiddlewareConfig): Middleware {\n  if (!config.channelSecret) {\n    throw new Error(\"no channel secret\");\n  }\n\n  const secret = config.channelSecret;\n\n  const _middleware: Middleware = async (req, res, next) => {\n    // header names are lower-cased\n    // https://nodejs.org/api/http.html#http_message_headers\n    const signature = req.headers[\n      Types.LINE_SIGNATURE_HTTP_HEADER_NAME\n    ] as string;\n\n    if (!signature) {\n      next(new SignatureValidationFailed(\"no signature\"));\n      return;\n    }\n\n    const body = await (async (): Promise<string | Buffer> => {\n      if (isValidBody((req as any).rawBody)) {\n        // rawBody is provided in Google Cloud Functions and others\n        return (req as any).rawBody;\n      } else if (isValidBody(req.body)) {\n        return req.body;\n      } else {\n        // body may not be parsed yet, parse it to a buffer\n        return new Promise<Buffer>((resolve, reject) =>\n          raw({ type: \"*/*\" })(req as any, res as any, (error: Error) =>\n            error ? reject(error) : resolve(req.body),\n          ),\n        );\n      }\n    })();\n\n    if (!validateSignature(body, secret, signature)) {\n      next(\n        new SignatureValidationFailed(\"signature validation failed\", signature),\n      );\n      return;\n    }\n\n    const strBody = Buffer.isBuffer(body) ? body.toString() : body;\n\n    try {\n      req.body = JSON.parse(strBody);\n      next();\n    } catch (err) {\n      next(new JSONParseError(err.message, strBody));\n    }\n  };\n  return (req, res, next): void => {\n    (<Promise<void>>_middleware(req, res, next)).catch(next);\n  };\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"5b006c844cb618274379ca842abcfa5a923954a8","contentHash":"13f3d17b426ac16671aef8b0dfa140620a843d1cf480ff19c5eff97f26b51d29"},"/Users/somkheart/Documents/lprlinebot/lib/validate-signature.ts":{"path":"/Users/somkheart/Documents/lprlinebot/lib/validate-signature.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":17},"end":{"line":3,"column":34}},"2":{"start":{"line":5,"column":4},"end":{"line":5,"column":38}},"3":{"start":{"line":8,"column":4},"end":{"line":10,"column":5}},"4":{"start":{"line":9,"column":8},"end":{"line":9,"column":21}},"5":{"start":{"line":11,"column":4},"end":{"line":11,"column":42}},"6":{"start":{"line":14,"column":4},"end":{"line":14,"column":117}},"7":{"start":{"line":16,"column":0},"end":{"line":16,"column":36}}},"fnMap":{"0":{"name":"s2b","decl":{"start":{"line":4,"column":9},"end":{"line":4,"column":12}},"loc":{"start":{"line":4,"column":28},"end":{"line":6,"column":1}},"line":4},"1":{"name":"safeCompare","decl":{"start":{"line":7,"column":9},"end":{"line":7,"column":20}},"loc":{"start":{"line":7,"column":27},"end":{"line":12,"column":1}},"line":7},"2":{"name":"validateSignature","decl":{"start":{"line":13,"column":9},"end":{"line":13,"column":26}},"loc":{"start":{"line":13,"column":59},"end":{"line":15,"column":1}},"line":13}},"branchMap":{"0":{"loc":{"start":{"line":8,"column":4},"end":{"line":10,"column":5}},"type":"if","locations":[{"start":{"line":8,"column":4},"end":{"line":10,"column":5}},{"start":{"line":8,"column":4},"end":{"line":10,"column":5}}],"line":8}},"s":{"0":1,"1":1,"2":9,"3":9,"4":1,"5":8,"6":10,"7":1},"f":{"0":9,"1":9,"2":10},"b":{"0":[1,8]},"inputSourceMap":{"version":3,"file":"/Users/somkheart/Documents/lprlinebot/lib/validate-signature.ts","sources":["/Users/somkheart/Documents/lprlinebot/lib/validate-signature.ts"],"names":[],"mappings":";;AAAA,mCAAqD;AAErD,SAAS,GAAG,CAAC,GAAW,EAAE,QAAwB;IAChD,OAAO,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC;AACpC,CAAC;AAED,SAAS,WAAW,CAAC,CAAS,EAAE,CAAS;IACvC,IAAI,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC,MAAM,EAAE;QACzB,OAAO,KAAK,CAAC;KACd;IACD,OAAO,wBAAe,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AAC/B,CAAC;AAED,SAAwB,iBAAiB,CACvC,IAAqB,EACrB,aAAqB,EACrB,SAAiB;IAEjB,OAAO,WAAW,CAChB,mBAAU,CAAC,QAAQ,EAAE,aAAa,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,EACzD,GAAG,CAAC,SAAS,EAAE,QAAQ,CAAC,CACzB,CAAC;AACJ,CAAC;AATD,oCASC","sourcesContent":["import { createHmac, timingSafeEqual } from \"crypto\";\n\nfunction s2b(str: string, encoding: BufferEncoding): Buffer {\n  return Buffer.from(str, encoding);\n}\n\nfunction safeCompare(a: Buffer, b: Buffer): boolean {\n  if (a.length !== b.length) {\n    return false;\n  }\n  return timingSafeEqual(a, b);\n}\n\nexport default function validateSignature(\n  body: string | Buffer,\n  channelSecret: string,\n  signature: string,\n): boolean {\n  return safeCompare(\n    createHmac(\"SHA256\", channelSecret).update(body).digest(),\n    s2b(signature, \"base64\"),\n  );\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"417d8131d2c935755907079a852af5dd62eba049","contentHash":"1b331054652013d821df6be9b69399d9f906dabc50ecddfd21854337262d8940"}}